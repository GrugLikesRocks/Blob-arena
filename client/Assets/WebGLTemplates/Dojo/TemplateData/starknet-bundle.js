/*! For license information please see starknet-bundle.js.LICENSE.txt */
(()=>{var t={328:(t,e,r)=>{r(624),t.exports=self.fetch.bind(self)},469:function(t,e,r){var n,s,a;a=function(){return function(){return function(t){var e=[];if(0===t.length)return"";if("string"!=typeof t[0])throw new TypeError("Url must be a string. Received "+t[0]);if(t[0].match(/^[^/:]+:\/*$/)&&t.length>1){var r=t.shift();t[0]=r+t[0]}t[0].match(/^file:\/\/\//)?t[0]=t[0].replace(/^([^/:]+):\/*/,"$1:///"):t[0]=t[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<t.length;n++){var s=t[n];if("string"!=typeof s)throw new TypeError("Url must be a string. Received "+s);""!==s&&(n>0&&(s=s.replace(/^[\/]+/,"")),s=n<t.length-1?s.replace(/[\/]+$/,""):s.replace(/[\/]+$/,"/"),e.push(s))}var a=e.join("/"),i=(a=a.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return i.shift()+(i.length>0?"?":"")+i.join("&")}("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},t.exports?t.exports=a():void 0===(s="function"==typeof(n=a)?n.call(e,r,e,t):n)||(t.exports=s)},624:(t,e,r)=>{"use strict";r.r(e),r.d(e,{DOMException:()=>E,Headers:()=>u,Request:()=>m,Response:()=>w,fetch:()=>v});var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},s={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};if(s.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function o(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s.iterable&&(e[Symbol.iterator]=function(){return e}),e}function u(t){this.map={},t instanceof u?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){if(2!=t.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function d(t){if(!t._noBody)return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function h(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function f(t){var e=new FileReader,r=h(e);return e.readAsArrayBuffer(t),r}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:s.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s.arrayBuffer&&s.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||i(t))?this._bodyArrayBuffer=p(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return d(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(s.blob)return this.blob().then(f);throw new Error("could not read as ArrayBuffer")},this.text=function(){var t,e,r,n,s,a=d(this);if(a)return a;if(this._bodyBlob)return t=this._bodyBlob,r=h(e=new FileReader),s=(n=/charset=([A-Za-z0-9_-]+)/.exec(t.type))?n[1]:"utf-8",e.readAsText(t,s),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(t,e){t=o(t),e=c(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},u.prototype.delete=function(t){delete this.map[o(t)]},u.prototype.get=function(t){return t=o(t),this.has(t)?this.map[t]:null},u.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},u.prototype.set=function(t,e){this.map[o(t)]=c(e)},u.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},u.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),l(t)},u.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),l(t)},u.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),l(t)},s.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var y=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function m(t,e){if(!(this instanceof m))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,s,a=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,a||null==t._bodyInit||(a=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=(s=(r=e.method||this.method||"GET").toUpperCase(),y.indexOf(s)>-1?s:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(s))}})),e}function w(t,e){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new u(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},g.call(m.prototype),g.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var b=[301,302,303,307,308];w.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})};var E=n.DOMException;try{new E}catch(t){(E=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),E.prototype.constructor=E}function v(t,e){return new Promise((function(r,a){var i=new m(t,e);if(i.signal&&i.signal.aborted)return a(new E("Aborted","AbortError"));var l=new XMLHttpRequest;function d(){l.abort()}if(l.onload=function(){var t,e,n={statusText:l.statusText,headers:(t=l.getAllResponseHeaders()||"",e=new u,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var s=r.join(":").trim();try{e.append(n,s)}catch(t){console.warn("Response "+t.message)}}})),e)};0===i.url.indexOf("file://")&&(l.status<200||l.status>599)?n.status=200:n.status=l.status,n.url="responseURL"in l?l.responseURL:n.headers.get("X-Request-URL");var s="response"in l?l.response:l.responseText;setTimeout((function(){r(new w(s,n))}),0)},l.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},l.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request timed out"))}),0)},l.onabort=function(){setTimeout((function(){a(new E("Aborted","AbortError"))}),0)},l.open(i.method,function(t){try{return""===t&&n.location.href?n.location.href:t}catch(e){return t}}(i.url),!0),"include"===i.credentials?l.withCredentials=!0:"omit"===i.credentials&&(l.withCredentials=!1),"responseType"in l&&(s.blob?l.responseType="blob":s.arrayBuffer&&(l.responseType="arraybuffer")),e&&"object"==typeof e.headers&&!(e.headers instanceof u||n.Headers&&e.headers instanceof n.Headers)){var h=[];Object.getOwnPropertyNames(e.headers).forEach((function(t){h.push(o(t)),l.setRequestHeader(t,c(e.headers[t]))})),i.headers.forEach((function(t,e){-1===h.indexOf(e)&&l.setRequestHeader(e,t)}))}else i.headers.forEach((function(t,e){l.setRequestHeader(e,t)}));i.signal&&(i.signal.addEventListener("abort",d),l.onreadystatechange=function(){4===l.readyState&&i.signal.removeEventListener("abort",d)}),l.send(void 0===i._bodyInit?null:i._bodyInit)}))}v.polyfill=!0,n.fetch||(n.fetch=v,n.Headers=u,n.Request=m,n.Response=w)}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};r.r(t),r.d(t,{OG:()=>N,My:()=>v,bytesToNumberBE:()=>x,lX:()=>S,Id:()=>R,fg:()=>F,qj:()=>O,hexToBytes:()=>A,ME:()=>k,lq:()=>C,z:()=>I,IV:()=>T,Q5:()=>U});var e={};r.r(e),r.d(e,{poseidon:()=>Vt,splitConstants:()=>zt,validateOpts:()=>Ht});var n={};r.r(n),r.d(n,{DER:()=>Gt,SWUFpSqrtRatio:()=>re,mapToCurveSimpleSWU:()=>ne,weierstrass:()=>ee,weierstrassPoints:()=>te});var s={};r.r(s),r.d(s,{CURVE:()=>Ee,Fp251:()=>Ve,MAX_VALUE:()=>oe,ProjectivePoint:()=>ve,Signature:()=>ke,_poseidonMDS:()=>Me,_starkCurve:()=>de,computeHashOnElements:()=>Le,ethSigToPrivate:()=>Te,getAccountPath:()=>Re,getPublicKey:()=>ge,getSharedSecret:()=>ye,getStarkKey:()=>Ie,grindKey:()=>Ce,keccak:()=>He,pedersen:()=>Ue,poseidonBasic:()=>Ze,poseidonCreate:()=>Ke,poseidonHash:()=>Ye,poseidonHashFunc:()=>We,poseidonHashMany:()=>Je,poseidonHashSingle:()=>Xe,poseidonSmall:()=>Ge,sign:()=>we,utils:()=>Ae,verify:()=>be});var a={};function i(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function o(t){return t instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name}function c(...t){const e=t=>t,r=(t,e)=>r=>t(e(r));return{encode:t.map((t=>t.encode)).reduceRight(r,e),decode:t.map((t=>t.decode)).reduce(r,e)}}function l(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("alphabet.encode input should be an array of numbers");return e.map((e=>{if(i(e),e<0||e>=t.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${t.length})`);return t[e]}))},decode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("alphabet.decode input should be array of strings");return e.map((e=>{if("string"!=typeof e)throw new Error(`alphabet.decode: not string element=${e}`);const r=t.indexOf(e);if(-1===r)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return r}))}}}function u(t=""){if("string"!=typeof t)throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("join.encode input should be array of strings");for(let t of e)if("string"!=typeof t)throw new Error(`join.encode: non-string input=${t}`);return e.join(t)},decode:e=>{if("string"!=typeof e)throw new Error("join.decode input should be string");return e.split(t)}}}function d(t,e="="){if(i(t),"string"!=typeof e)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let t of r)if("string"!=typeof t)throw new Error(`padding.encode: non-string input=${t}`);for(;r.length*t%8;)r.push(e);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let t of r)if("string"!=typeof t)throw new Error(`padding.decode: non-string input=${t}`);let n=r.length;if(n*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if(!((n-1)*t%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function h(t){if("function"!=typeof t)throw new Error("normalize fn should be function");return{encode:t=>t,decode:e=>t(e)}}r.r(a),r.d(a,{Account:()=>Qu,AccountInterface:()=>rd,BlockStatus:()=>no,BlockTag:()=>so,CairoCustomEnum:()=>Cc,CairoOption:()=>Tc,CairoOptionVariant:()=>Ic,CairoResult:()=>Rc,CairoResultVariant:()=>Oc,CallData:()=>tl,Contract:()=>dd,ContractFactory:()=>fd,ContractInterface:()=>hd,CustomError:()=>Wl,EntryPointType:()=>Ji,GatewayError:()=>Jl,HttpError:()=>Ql,LibraryError:()=>Xl,Litteral:()=>Xi,Provider:()=>Iu,ProviderInterface:()=>td,RPC:()=>ao,RpcProvider:()=>_u,SIMULATION_FLAG:()=>Gi,Sequencer:()=>mo,SequencerProvider:()=>Cu,Signer:()=>Xu,SignerInterface:()=>Tu,TransactionExecutionStatus:()=>ro,TransactionFinalityStatus:()=>eo,TransactionStatus:()=>to,TransactionType:()=>Qi,Uint:()=>Wi,ValidateType:()=>Yi,addAddressPadding:()=>pd,buildUrl:()=>xu,cairo:()=>Jo,constants:()=>hi,contractClassResponseToLegacyCompiledContract:()=>zl,defaultProvider:()=>ed,ec:()=>rl,encode:()=>fi,events:()=>nd,extractContractHashes:()=>Hl,fixProto:()=>Yl,fixStack:()=>Gl,getCalldata:()=>ud,getChecksumAddress:()=>yd,getDefaultNodeUrl:()=>yu,hash:()=>el,isSierra:()=>$l,isUrl:()=>Au,json:()=>nl,merkle:()=>Lu,num:()=>wo,number:()=>_d,parseUDCEvent:()=>Ju,provider:()=>jl,selector:()=>Uo,shortString:()=>Vo,splitArgsAndOptions:()=>id,stark:()=>Ol,starknetId:()=>tu,transaction:()=>Ou,typedData:()=>Uu,types:()=>Ki,uint256:()=>Qo,validateAndParseAddress:()=>gd,validateChecksumAddress:()=>md});const f=(t,e)=>e?f(e,t%e):t,p=(t,e)=>t+(e-f(t,e));function g(t,e,r,n){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(p(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${p(e,r)}`);let s=0,a=0;const o=2**r-1,c=[];for(const n of t){if(i(n),n>=2**e)throw new Error(`convertRadix2: invalid data word=${n} from=${e}`);if(s=s<<e|n,a+e>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${e}`);for(a+=e;a>=r;a-=r)c.push((s>>a-r&o)>>>0);s&=2**a-1}if(s=s<<r-a&o,!n&&a>=e)throw new Error("Excess padding");if(!n&&s)throw new Error(`Non-zero padding: ${s}`);return n&&a>0&&c.push(s>>>0),c}function y(t,e=!1){if(i(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(p(8,t)>32||p(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!o(r))throw new Error("radix2.encode input should be Uint8Array");return g(Array.from(r),8,t,!e)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(g(r,t,8,e))}}}y(4),l("0123456789ABCDEF"),u(""),y(5),l("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),d(5),u("");const m=(y(5),l("0123456789ABCDEFGHIJKLMNOPQRSTUV"),d(5),u(""),y(5),l("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),u(""),h((t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),c(y(6),l("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),d(6),u("")));y(6),l("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),d(6),u("");l("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),u("");const _=(y(4),l("0123456789abcdef"),u(""),h((t=>{if("string"!=typeof t||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})),BigInt(0),BigInt(1)),w=BigInt(2),b=t=>t instanceof Uint8Array,E=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function v(t){if(!b(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=E[t[r]];return e}function k(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function A(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){const n=2*e,s=t.slice(n,n+2),a=Number.parseInt(s,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");r[e]=a}return r}function x(t){return k(v(t))}function S(t){if(!b(t))throw new Error("Uint8Array expected");return k(v(Uint8Array.from(t).reverse()))}function C(t,e){return A(t.toString(16).padStart(2*e,"0"))}function I(t,e){return C(t,e).reverse()}function T(t){return A(function(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}(t))}function O(t,e,r){let n;if("string"==typeof e)try{n=A(e)}catch(r){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else{if(!b(e))throw new Error(`${t} must be hex string or Uint8Array`);n=Uint8Array.from(e)}const s=n.length;if("number"==typeof r&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function R(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!b(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}const N=t=>(w<<BigInt(t-1))-_,B=t=>new Uint8Array(t),D=t=>Uint8Array.from(t);function F(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=B(t),s=B(t),a=0;const i=()=>{n.fill(1),s.fill(0),a=0},o=(...t)=>r(s,n,...t),c=(t=B())=>{s=o(D([0]),t),n=o(),0!==t.length&&(s=o(D([1]),t),n=o())},l=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){n=o();const e=n.slice();r.push(e),t+=n.length}return R(...r)};return(t,e)=>{let r;for(i(),c(t);!(r=e(l()));)c();return i(),r}}const P={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function U(t,e,r={}){const n=(e,r,n)=>{const s=P[r];if("function"!=typeof s)throw new Error(`Invalid validator "${r}", expected function`);const a=t[e];if(!(n&&void 0===a||s(a,t)))throw new Error(`Invalid param ${String(e)}=${a} (${typeof a}), expected ${r}`)};for(const[t,r]of Object.entries(e))n(t,r,!1);for(const[t,e]of Object.entries(r))n(t,e,!0);return t}function L(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function $(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function H(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function z(t,e){$(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const V=BigInt(2**32-1),j=BigInt(32);function M(t,e=!1){return e?{h:Number(t&V),l:Number(t>>j&V)}:{h:0|Number(t>>j&V),l:0|Number(t&V)}}function q(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:a,l:i}=M(t[s],e);[r[s],n[s]]=[a,i]}return[r,n]}const Z="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,K=t=>t instanceof Uint8Array,G=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Y=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function W(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function X(t){if("string"==typeof t&&(t=W(t)),!K(t))throw new Error("expected Uint8Array, got "+typeof t);return t}class J{clone(){return this._cloneInto()}}function Q(t){const e=e=>t().update(X(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function tt(t=32){if(Z&&"function"==typeof Z.getRandomValues)return Z.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}const[et,rt,nt]=[[],[],[]],st=BigInt(0),at=BigInt(1),it=BigInt(2),ot=BigInt(7),ct=BigInt(256),lt=BigInt(113);for(let t=0,e=at,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],et.push(2*(5*n+r)),rt.push((t+1)*(t+2)/2%64);let s=st;for(let t=0;t<7;t++)e=(e<<at^(e>>ot)*lt)%ct,e&it&&(s^=at<<(at<<BigInt(t))-at);nt.push(s)}const[ut,dt]=q(nt,!0),ht=(t,e,r)=>r>32?((t,e,r)=>e<<r-32|t>>>64-r)(t,e,r):((t,e,r)=>t<<r|e>>>32-r)(t,e,r),ft=(t,e,r)=>r>32?((t,e,r)=>t<<r-32|e>>>64-r)(t,e,r):((t,e,r)=>e<<r|t>>>32-r)(t,e,r);class pt extends J{constructor(t,e,r,n=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,L(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){!function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,s=(e+2)%10,a=r[s],i=r[s+1],o=ht(a,i,1)^r[n],c=ft(a,i,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=o,t[e+r+1]^=c}let e=t[2],s=t[3];for(let r=0;r<24;r++){const n=rt[r],a=ht(e,s,n),i=ft(e,s,n),o=et[r];e=t[o],s=t[o+1],t[o]=a,t[o+1]=i}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=ut[n],t[1]^=dt[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){H(this);const{blockLen:e,state:r}=this,n=(t=X(t)).length;for(let s=0;s<n;){const a=Math.min(e-this.pos,n-s);for(let e=0;e<a;e++)r[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,128&e&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){H(this,!1),$(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,s=t.length;n<s;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,s-n);t.set(e.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return L(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(z(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:s,enableXOF:a}=this;return t||(t=new pt(e,r,n,a,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=n,t.enableXOF=a,t.destroyed=this.destroyed,t}}const gt=((t,e,r)=>Q((()=>new pt(e,t,r))))(1,136,32);class yt extends J{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=G(this.buffer)}update(t){H(this);const{view:e,buffer:r,blockLen:n}=this,s=(t=X(t)).length;for(let a=0;a<s;){const i=Math.min(n-this.pos,s-a);if(i!==n)r.set(t.subarray(a,a+i),this.pos),this.pos+=i,a+=i,this.pos===n&&(this.process(e,0),this.pos=0);else{const e=G(t);for(;n<=s-a;a+=n)this.process(e,a)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){H(this),z(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:s}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(r,0),a=0);for(let t=a;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const s=BigInt(32),a=BigInt(4294967295),i=Number(r>>s&a),o=Number(r&a),c=n?4:0,l=n?0:4;t.setUint32(e+c,i,n),t.setUint32(e+l,o,n)}(r,n-8,BigInt(8*this.length),s),this.process(r,0);const i=G(t),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)i.setUint32(4*t,l[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:s,destroyed:a,pos:i}=this;return t.length=n,t.pos=i,t.finished=s,t.destroyed=a,n%e&&t.buffer.set(r),t}}const mt=(t,e,r)=>t&e^t&r^e&r,_t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bt=new Uint32Array(64);class Et extends yt{constructor(){super(64,32,8,!1),this.A=0|wt[0],this.B=0|wt[1],this.C=0|wt[2],this.D=0|wt[3],this.E=0|wt[4],this.F=0|wt[5],this.G=0|wt[6],this.H=0|wt[7]}get(){const{A:t,B:e,C:r,D:n,E:s,F:a,G:i,H:o}=this;return[t,e,r,n,s,a,i,o]}set(t,e,r,n,s,a,i,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|s,this.F=0|a,this.G=0|i,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)bt[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=bt[t-15],r=bt[t-2],n=Y(e,7)^Y(e,18)^e>>>3,s=Y(r,17)^Y(r,19)^r>>>10;bt[t]=s+bt[t-7]+n+bt[t-16]|0}let{A:r,B:n,C:s,D:a,E:i,F:o,G:c,H:l}=this;for(let t=0;t<64;t++){const e=l+(Y(i,6)^Y(i,11)^Y(i,25))+((u=i)&o^~u&c)+_t[t]+bt[t]|0,d=(Y(r,2)^Y(r,13)^Y(r,22))+mt(r,n,s)|0;l=c,c=o,o=i,i=a+e|0,a=s,s=n,n=r,r=e+d|0}var u;r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,a=a+this.D|0,i=i+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,n,s,a,i,o,c,l)}roundClean(){bt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const vt=Q((()=>new Et)),kt=BigInt(0),At=BigInt(1),xt=BigInt(2),St=BigInt(3),Ct=BigInt(4),It=BigInt(5),Tt=BigInt(8);function Ot(t,e){const r=t%e;return r>=kt?r:e+r}function Rt(t,e,r){if(r<=kt||e<kt)throw new Error("Expected power/modulo > 0");if(r===At)return kt;let n=At;for(;e>kt;)e&At&&(n=n*t%r),t=t*t%r,e>>=At;return n}function Nt(t,e){if(t===kt||e<=kt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Ot(t,e),n=e,s=kt,a=At,i=At,o=kt;for(;r!==kt;){const t=n/r,e=n%r,c=s-i*t,l=a-o*t;n=r,r=e,s=i,a=o,i=c,o=l}if(n!==At)throw new Error("invert: does not exist");return Ot(s,e)}BigInt(9),BigInt(16);const Bt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Dt(t){return U(t,Bt.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function Ft(t,e,r){if(r<kt)throw new Error("Expected power > 0");if(r===kt)return t.ONE;if(r===At)return e;let n=t.ONE,s=e;for(;r>kt;)r&At&&(n=t.mul(n,s)),s=t.sqr(s),r>>=At;return n}function Pt(t,e){const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Ut(t,e,r=!1,n={}){if(t<=kt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:a}=Pt(t,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const i=function(t){if(t%Ct===St){const e=(t+At)/Ct;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}if(t%Tt===It){const e=(t-It)/Tt;return function(t,r){const n=t.mul(r,xt),s=t.pow(n,e),a=t.mul(r,s),i=t.mul(t.mul(a,xt),s),o=t.mul(a,t.sub(i,t.ONE));if(!t.eql(t.sqr(o),r))throw new Error("Cannot find square root");return o}}return function(t){const e=(t-At)/xt;let r,n,s;for(r=t-At,n=0;r%xt===kt;r/=xt,n++);for(s=xt;s<t&&Rt(s,e,t)!==t-At;s++);if(1===n){const e=(t+At)/Ct;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}const a=(r+At)/xt;return function(t,i){if(t.pow(i,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let o=n,c=t.pow(t.mul(t.ONE,s),r),l=t.pow(i,a),u=t.pow(i,r);for(;!t.eql(u,t.ONE);){if(t.eql(u,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(u);e<o&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const r=t.pow(c,At<<BigInt(o-e-1));c=t.sqr(r),l=t.mul(l,r),u=t.mul(u,c),o=e}return l}}(t)}(t),o=Object.freeze({ORDER:t,BITS:s,BYTES:a,MASK:N(s),ZERO:kt,ONE:At,create:e=>Ot(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return kt<=e&&e<t},is0:t=>t===kt,isOdd:t=>(t&At)===At,neg:e=>Ot(-e,t),eql:(t,e)=>t===e,sqr:e=>Ot(e*e,t),add:(e,r)=>Ot(e+r,t),sub:(e,r)=>Ot(e-r,t),mul:(e,r)=>Ot(e*r,t),pow:(t,e)=>Ft(o,t,e),div:(e,r)=>Ot(e*Nt(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Nt(e,t),sqrt:n.sqrt||(t=>i(o,t)),invertBatch:t=>function(t,e){const r=new Array(e.length),n=e.reduce(((e,n,s)=>t.is0(n)?e:(r[s]=e,t.mul(e,n))),t.ONE),s=t.inv(n);return e.reduceRight(((e,n,s)=>t.is0(n)?e:(r[s]=t.mul(e,r[s]),t.mul(e,n))),s),r}(o,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?I(t,a):C(t,a),fromBytes:t=>{if(t.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${t.length}`);return r?S(t):x(t)}});return Object.freeze(o)}function Lt(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function $t(t){const e=Lt(t);return e+Math.ceil(e/2)}function Ht(t){const{Fp:e,mds:r,reversePartialPowIdx:n,roundConstants:s}=t,{roundsFull:a,roundsPartial:i,sboxPower:o,t:c}=t;Dt(e);for(const e of["t","roundsFull","roundsPartial"])if("number"!=typeof t[e]||!Number.isSafeInteger(t[e]))throw new Error(`Poseidon: invalid param ${e}=${t[e]} (${typeof t[e]})`);if(!Array.isArray(r)||r.length!==c)throw new Error("Poseidon: wrong MDS matrix");const l=r.map((t=>{if(!Array.isArray(t)||t.length!==c)throw new Error(`Poseidon MDS matrix row: ${t}`);return t.map((t=>{if("bigint"!=typeof t)throw new Error(`Poseidon MDS matrix value=${t}`);return e.create(t)}))}));if(void 0!==n&&"boolean"!=typeof n)throw new Error(`Poseidon: invalid param reversePartialPowIdx=${n}`);if(a%2!=0)throw new Error(`Poseidon roundsFull is not even: ${a}`);const u=a+i;if(!Array.isArray(s)||s.length!==u)throw new Error("Poseidon: wrong round constants");const d=s.map((t=>{if(!Array.isArray(t)||t.length!==c)throw new Error(`Poseidon wrong round constants: ${t}`);return t.map((t=>{if("bigint"!=typeof t||!e.isValid(t))throw new Error(`Poseidon wrong round constant=${t}`);return e.create(t)}))}));if(!o||![3,5,7].includes(o))throw new Error(`Poseidon wrong sboxPower=${o}`);const h=BigInt(o);let f=t=>Ft(e,t,h);return 3===o?f=t=>e.mul(e.sqrN(t),t):5===o&&(f=t=>e.mul(e.sqrN(e.sqrN(t)),t)),Object.freeze({...t,rounds:u,sboxFn:f,roundConstants:d,mds:l})}function zt(t,e){if("number"!=typeof e)throw new Error("poseidonSplitConstants: wrong t");if(!Array.isArray(t)||t.length%e)throw new Error("poseidonSplitConstants: wrong rc");const r=[];let n=[];for(let s=0;s<t.length;s++)n.push(t[s]),n.length===e&&(r.push(n),n=[]);return r}function Vt(t){const e=Ht(t),{Fp:r,mds:n,roundConstants:s,rounds:a,roundsPartial:i,sboxFn:o,t:c}=e,l=e.roundsFull/2,u=e.reversePartialPowIdx?c-1:0,d=(t,e,a)=>(t=t.map(((t,e)=>r.add(t,s[a][e]))),e?t=t.map((t=>o(t))):t[u]=o(t[u]),t=n.map((e=>e.reduce(((e,n,s)=>r.add(e,r.mulN(n,t[s]))),r.ZERO)))),h=function(t){if(!Array.isArray(t)||t.length!==c)throw new Error(`Poseidon: wrong values (expected array of bigints with length ${c})`);t=t.map((t=>{if("bigint"!=typeof t)throw new Error(`Poseidon: wrong value=${t} (${typeof t})`);return r.create(t)}));let e=0;for(let r=0;r<l;r++)t=d(t,!0,e++);for(let r=0;r<i;r++)t=d(t,!1,e++);for(let r=0;r<l;r++)t=d(t,!0,e++);if(e!==a)throw new Error(`Poseidon: wrong number of rounds: last round=${e}, total=${a}`);return t};return h.roundConstants=s,h}const jt=BigInt(0),Mt=BigInt(1);function qt(t){return Dt(t.Fp),U(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Pt(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{bytesToNumberBE:Zt,hexToBytes:Kt}=t,Gt={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=Gt;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Zt(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=Gt,r="string"==typeof t?Kt(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:s,l:a}=Gt._parseInt(r.subarray(2)),{d:i,l:o}=Gt._parseInt(a);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:i}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,r=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},n=e(r(t.s)),s=e(r(t.r)),a=n.length/2,i=s.length/2,o=r(a),c=r(i);return`30${r(i+a+4)}02${c}${s}02${o}${n}`}},Yt=BigInt(0),Wt=BigInt(1),Xt=BigInt(2),Jt=BigInt(3),Qt=BigInt(4);function te(t){const e=function(t){const e=qt(t);U(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,n=e.toBytes||((t,e,n)=>{const s=e.toAffine();return R(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),s=e.fromBytes||(t=>{const e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function a(t){const{a:n,b:s}=e,a=r.sqr(t),i=r.mul(a,t);return r.add(r.add(i,r.mul(t,n)),s)}if(!r.eql(r.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function i(t){return"bigint"==typeof t&&Yt<t&&t<e.n}function o(t){if(!i(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:s,n:a}=e;if(r&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=v(t)),"string"!=typeof t||!r.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*n,"0")}let i;try{i="bigint"==typeof t?t:x(O("private key",t,n))}catch(e){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof t}`)}return s&&(i=Ot(i,a)),o(i),i}const l=new Map;function u(t){if(!(t instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof d)throw new Error("projective point not allowed");const s=t=>r.eql(t,r.ZERO);return s(e)&&s(n)?d.ZERO:new d(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(d.fromAffine)}static fromHex(t){const e=d.fromAffine(s(O("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return d.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:n}=this.toAffine();if(!r.isValid(t)||!r.isValid(n))throw new Error("bad point: x or y not FE");const s=r.sqr(n),i=a(t);if(!r.eql(s,i))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){u(t);const{px:e,py:n,pz:s}=this,{px:a,py:i,pz:o}=t,c=r.eql(r.mul(e,o),r.mul(a,s)),l=r.eql(r.mul(n,o),r.mul(i,s));return c&&l}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,s=r.mul(n,Jt),{px:a,py:i,pz:o}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,h=r.mul(a,a),f=r.mul(i,i),p=r.mul(o,o),g=r.mul(a,i);return g=r.add(g,g),u=r.mul(a,o),u=r.add(u,u),c=r.mul(t,u),l=r.mul(s,p),l=r.add(c,l),c=r.sub(f,l),l=r.add(f,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(s,u),p=r.mul(t,p),g=r.sub(h,p),g=r.mul(t,g),g=r.add(g,u),u=r.add(h,h),h=r.add(u,h),h=r.add(h,p),h=r.mul(h,g),l=r.add(l,h),p=r.mul(i,o),p=r.add(p,p),h=r.mul(p,g),c=r.sub(c,h),u=r.mul(p,f),u=r.add(u,u),u=r.add(u,u),new d(c,l,u)}add(t){u(t);const{px:n,py:s,pz:a}=this,{px:i,py:o,pz:c}=t;let l=r.ZERO,h=r.ZERO,f=r.ZERO;const p=e.a,g=r.mul(e.b,Jt);let y=r.mul(n,i),m=r.mul(s,o),_=r.mul(a,c),w=r.add(n,s),b=r.add(i,o);w=r.mul(w,b),b=r.add(y,m),w=r.sub(w,b),b=r.add(n,a);let E=r.add(i,c);return b=r.mul(b,E),E=r.add(y,_),b=r.sub(b,E),E=r.add(s,a),l=r.add(o,c),E=r.mul(E,l),l=r.add(m,_),E=r.sub(E,l),f=r.mul(p,b),l=r.mul(g,_),f=r.add(l,f),l=r.sub(m,f),f=r.add(m,f),h=r.mul(l,f),m=r.add(y,y),m=r.add(m,y),_=r.mul(p,_),b=r.mul(g,b),m=r.add(m,_),_=r.sub(y,_),_=r.mul(p,_),b=r.add(b,_),y=r.mul(m,b),h=r.add(h,y),y=r.mul(E,b),l=r.mul(w,l),l=r.sub(l,y),y=r.mul(w,m),f=r.mul(E,f),f=r.add(f,y),new d(l,h,f)}subtract(t){return this.add(t.negate())}is0(){return this.equals(d.ZERO)}wNAF(t){return f.wNAFCached(this,l,t,(t=>{const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(d.fromAffine)}))}multiplyUnsafe(t){const n=d.ZERO;if(t===Yt)return n;if(o(t),t===Wt)return this;const{endo:s}=e;if(!s)return f.unsafeLadder(this,t);let{k1neg:a,k1:i,k2neg:c,k2:l}=s.splitScalar(t),u=n,h=n,p=this;for(;i>Yt||l>Yt;)i&Wt&&(u=u.add(p)),l&Wt&&(h=h.add(p)),p=p.double(),i>>=Wt,l>>=Wt;return a&&(u=u.negate()),c&&(h=h.negate()),h=new d(r.mul(h.px,s.beta),h.py,h.pz),u.add(h)}multiply(t){o(t);let n,s,a=t;const{endo:i}=e;if(i){const{k1neg:t,k1:e,k2neg:o,k2:c}=i.splitScalar(a);let{p:l,f:u}=this.wNAF(e),{p:h,f:p}=this.wNAF(c);l=f.constTimeNegate(t,l),h=f.constTimeNegate(o,h),h=new d(r.mul(h.px,i.beta),h.py,h.pz),n=l.add(h),s=u.add(p)}else{const{p:t,f:e}=this.wNAF(a);n=t,s=e}return d.normalizeZ([n,s])[0]}multiplyAndAddUnsafe(t,e,r){const n=d.BASE,s=(t,e)=>e!==Yt&&e!==Wt&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),a=s(this,e).add(s(t,r));return a.is0()?void 0:a}toAffine(t){const{px:e,py:n,pz:s}=this,a=this.is0();null==t&&(t=a?r.ONE:r.inv(s));const i=r.mul(e,t),o=r.mul(n,t),c=r.mul(s,t);if(a)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:i,y:o}}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===Wt)return!0;if(r)return r(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===Wt?this:r?r(d,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),n(d,this,t)}toHex(t=!0){return v(this.toRawBytes(t))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const h=e.nBitLength,f=function(t,e){const r=(t,e)=>{const r=e.negate();return t?r:e},n=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:r,unsafeLadder(e,r){let n=t.ZERO,s=e;for(;r>jt;)r&Mt&&(n=n.add(s)),s=s.double(),r>>=Mt;return n},precomputeWindow(t,e){const{windows:r,windowSize:s}=n(e),a=[];let i=t,o=i;for(let t=0;t<r;t++){o=i,a.push(o);for(let t=1;t<s;t++)o=o.add(i),a.push(o);i=o.double()}return a},wNAF(e,s,a){const{windows:i,windowSize:o}=n(e);let c=t.ZERO,l=t.BASE;const u=BigInt(2**e-1),d=2**e,h=BigInt(e);for(let t=0;t<i;t++){const e=t*o;let n=Number(a&u);a>>=h,n>o&&(n-=d,a+=Mt);const i=e,f=e+Math.abs(n)-1,p=t%2!=0,g=n<0;0===n?l=l.add(r(p,s[i])):c=c.add(r(g,s[f]))}return{p:c,f:l}},wNAFCached(t,e,r,n){const s=t._WINDOW_SIZE||1;let a=e.get(t);return a||(a=this.precomputeWindow(t,s),1!==s&&e.set(t,n(a))),this.wNAF(s,a,r)}}}(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:a,isWithinCurveOrder:i}}function ee(t){const e=function(t){const e=qt(t);return U(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n}=e,s=r.BYTES+1,a=2*r.BYTES+1;function i(t){return Ot(t,n)}function o(t){return Nt(t,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=te({...e,toBytes(t,e,n){const s=e.toAffine(),a=r.toBytes(s.x),i=R;return n?i(Uint8Array.from([e.hasEvenY()?2:3]),a):i(Uint8Array.from([4]),a,r.toBytes(s.y))},fromBytes(t){const e=t.length,n=t[0],i=t.subarray(1);if(e!==s||2!==n&&3!==n){if(e===a&&4===n)return{x:r.fromBytes(i.subarray(0,r.BYTES)),y:r.fromBytes(i.subarray(r.BYTES,2*r.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${s} compressed bytes or ${a} uncompressed bytes`)}{const t=x(i);if(!(Yt<(o=t)&&o<r.ORDER))throw new Error("Point is not on curve");const e=u(t);let s=r.sqrt(e);return!(1&~n)!=((s&Wt)===Wt)&&(s=r.neg(s)),{x:t,y:s}}var o}}),h=t=>v(C(t,e.nByteLength));function f(t){return t>n>>Wt}const p=(t,e,r)=>x(t.slice(e,r));class g{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){const r=e.nByteLength;return t=O("compactSignature",t,2*r),new g(p(t,0,r),p(t,r,2*r))}static fromDER(t){const{r:e,s:r}=Gt.toSig(O("DER",t));return new g(e,r)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r:n,s,recovery:a}=this,l=w(O("msgHash",t));if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");const u=2===a||3===a?n+e.n:n;if(u>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=1&a?"03":"02",f=c.fromHex(d+h(u)),p=o(u),g=i(-l*p),y=i(s*p),m=c.BASE.multiplyAndAddUnsafe(f,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return A(this.toDERHex())}toDERHex(){return Gt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return A(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(t){try{return l(t),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const t=$t(e.n);return function(t,e,r=!1){const n=t.length,s=Lt(e),a=$t(e);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);const i=Ot(r?x(t):S(t),e-At)+At;return r?I(i,s):C(i,s)}(e.randomBytes(t),e.n)},precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function m(t){const e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?n===s||n===a:r?n===2*s||n===2*a:t instanceof c}const _=e.bits2int||function(t){const r=x(t),n=8*t.length-e.nBitLength;return n>0?r>>BigInt(n):r},w=e.bits2int_modN||function(t){return i(_(t))},b=N(e.nBitLength);function E(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(Yt<=t&&t<b))throw new Error(`bigint expected < 2^${e.nBitLength}`);return C(t,e.nByteLength)}const k={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(m(t))throw new Error("first arg must be private key");if(!m(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(t)).toRawBytes(r)},sign:function(t,n,s=k){const{seed:a,k2sig:u}=function(t,n,s=k){if(["recovered","canonical"].some((t=>t in s)))throw new Error("sign() legacy options not supported");const{hash:a,randomBytes:u}=e;let{lowS:h,prehash:p,extraEntropy:y}=s;null==h&&(h=!0),t=O("msgHash",t),p&&(t=O("prehashed msgHash",a(t)));const m=w(t),b=l(n),v=[E(b),E(m)];if(null!=y){const t=!0===y?u(r.BYTES):y;v.push(O("extraEntropy",t))}const A=R(...v),x=m;return{seed:A,k2sig:function(t){const e=_(t);if(!d(e))return;const r=o(e),n=c.BASE.multiply(e).toAffine(),s=i(n.x);if(s===Yt)return;const a=i(r*i(x+s*b));if(a===Yt)return;let l=(n.x===s?0:2)|Number(n.y&Wt),u=a;return h&&f(a)&&(u=function(t){return f(t)?i(-t):t}(a),l^=1),new g(s,u,l)}}}(t,n,s),h=e;return F(h.hash.outputLen,h.nByteLength,h.hmac)(a,u)},verify:function(t,r,n,s=T){const a=t;if(r=O("msgHash",r),n=O("publicKey",n),"strict"in s)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=s;let d,h;try{if("string"==typeof a||a instanceof Uint8Array)try{d=g.fromDER(a)}catch(t){if(!(t instanceof Gt.Err))throw t;d=g.fromCompact(a)}else{if("object"!=typeof a||"bigint"!=typeof a.r||"bigint"!=typeof a.s)throw new Error("PARSE");{const{r:t,s:e}=a;d=new g(t,e)}}h=c.fromHex(n)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&d.hasHighS())return!1;u&&(r=e.hash(r));const{r:f,s:p}=d,y=w(r),m=o(p),_=i(y*m),b=i(f*m),E=c.BASE.multiplyAndAddUnsafe(h,_,b)?.toAffine();return!!E&&i(E.x)===f},ProjectivePoint:c,Signature:g,utils:y}}function re(t,e){const r=t.ORDER;let n=Yt;for(let t=r-Wt;t%Xt===Yt;t/=Xt)n+=Wt;const s=n,a=Xt<<s-Wt-Wt,i=a*Xt,o=(r-Wt)/i,c=(o-Wt)/Xt,l=i-Wt,u=a,d=t.pow(e,o),h=t.pow(e,(o+Wt)/Xt);let f=(e,r)=>{let n=d,a=t.pow(r,l),i=t.sqr(a);i=t.mul(i,r);let o=t.mul(e,i);o=t.pow(o,c),o=t.mul(o,a),a=t.mul(o,r),i=t.mul(o,e);let f=t.mul(i,a);o=t.pow(f,u);let p=t.eql(o,t.ONE);a=t.mul(i,h),o=t.mul(f,n),i=t.cmov(a,i,p),f=t.cmov(o,f,p);for(let e=s;e>Wt;e--){let r=e-Xt;r=Xt<<r-Wt;let s=t.pow(f,r);const o=t.eql(s,t.ONE);a=t.mul(i,n),n=t.mul(n,n),s=t.mul(f,n),i=t.cmov(a,i,o),f=t.cmov(s,f,o)}return{isValid:p,value:i}};if(t.ORDER%Qt===Jt){const r=(t.ORDER-Jt)/Qt,n=t.sqrt(t.neg(e));f=(e,s)=>{let a=t.sqr(s);const i=t.mul(e,s);a=t.mul(a,i);let o=t.pow(a,r);o=t.mul(o,i);const c=t.mul(o,n),l=t.mul(t.sqr(o),s),u=t.eql(l,e);return{isValid:u,value:t.cmov(c,o,u)}}}return f}function ne(t,e){if(Dt(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=re(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let s,a,i,o,c,l,u,d;s=t.sqr(n),s=t.mul(s,e.Z),a=t.sqr(s),a=t.add(a,s),i=t.add(a,t.ONE),i=t.mul(i,e.B),o=t.cmov(e.Z,t.neg(a),!t.eql(a,t.ZERO)),o=t.mul(o,e.A),a=t.sqr(i),l=t.sqr(o),c=t.mul(l,e.A),a=t.add(a,c),a=t.mul(a,i),l=t.mul(l,o),c=t.mul(l,e.B),a=t.add(a,c),u=t.mul(s,i);const{isValid:h,value:f}=r(a,l);d=t.mul(s,n),d=t.mul(d,f),u=t.cmov(u,i,h),d=t.cmov(d,f,h);const p=t.isOdd(n)===t.isOdd(d);return d=t.cmov(t.neg(d),d,p),u=t.div(u,o),{x:u,y:d}}}class se extends J{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");L(t.outputLen),L(t.blockLen)}(t);const r=X(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?t.create().update(r).digest():r);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return H(this),this.iHash.update(t),this}digestInto(t){H(this),$(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:s,blockLen:a,outputLen:i}=this;return t.finished=n,t.destroyed=s,t.blockLen=a,t.outputLen=i,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ae=(t,e,r)=>new se(t,e).update(r).digest();ae.create=(t,e)=>new se(t,e);const ie=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),oe=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");function ce(t){for(;0===t[0];)t=t.subarray(1);const e=8*t.length-252,r=x(t);return e>0?r>>BigInt(e):r}function le(t){return"string"==typeof t&&1&(t=Se(t)).length&&(t="0"+t),A(t)}const ue=ee({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:Ut(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:ie,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(he=vt,{hash:he,hmac:(t,...e)=>ae(he,t,function(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!K(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}(...e)),randomBytes:tt}),bits2int:ce,bits2int_modN:t=>{const e=x(t).toString(16);return 63===e.length&&(t=le(e+"0")),Ot(ce(t),ie)}}),de=ue;var he;function fe(t){return O("","string"==typeof t?le(t):t)}function pe(t){return v(fe(t)).padStart(64,"0")}function ge(t,e=!1){return ue.getPublicKey(pe(t),e)}function ye(t,e){return ue.getSharedSecret(pe(t),e)}function me(t){const{r:e,s:r}=t;if(e<0n||e>=oe)throw new Error(`Signature.r should be [1, ${oe})`);const n=Nt(r,ie);if(n<0n||n>=oe)throw new Error(`inv(Signature.s) should be [1, ${oe})`)}function _e(t){const e=fe(t);if(x(e)>=oe)throw new Error(`msgHash should be [0, ${oe})`);return e}function we(t,e,r){const n=ue.sign(_e(t),pe(e),r);return me(n),n}function be(t,e,r){if(!(t instanceof ke)){const e=fe(t);try{t=ke.fromDER(e)}catch(r){if(!(r instanceof Gt.Err))throw r;t=ke.fromCompact(e)}}return me(t),ue.verify(t,_e(e),fe(r))}const{CURVE:Ee,ProjectivePoint:ve,Signature:ke,utils:Ae}=ue;function xe(t){return`0x${v(t.subarray(1)).replace(/^0+/gm,"")}`}function Se(t){return t.replace(/^0x/i,"")}function Ce(t){const e=fe(t),r=2n**256n,n=r-Ot(r,ie);for(let t=0;;t++){const r=ze(R(e,T(BigInt(t))));if(r<n)return Ot(r,ie).toString(16);if(1e5===t)throw new Error("grindKey is broken: tried 100k vals")}}function Ie(t){return xe(ge(t,!0))}function Te(t){if(130!==(t=Se(t)).length)throw new Error("Wrong ethereum signature");return Ce(t.substring(0,64))}const Oe=t=>Number(2147483647n&t);function Re(t,e,r,n){const s=Oe(ze(t)),a=Oe(ze(e)),i=k(Se(r));return`m/2645'/${s}'/${a}'/${Oe(i)}'/${Oe(i>>31n)}'/${n}`}const Ne=[new ve(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new ve(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new ve(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new ve(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new ve(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function Be(t,e){const r=[];let n=t;for(let t=0;t<248;t++)r.push(n),n=n.double();n=e;for(let t=0;t<4;t++)r.push(n),n=n.double();return r}const De=Be(Ne[1],Ne[2]),Fe=Be(Ne[3],Ne[4]);function Pe(t,e,r){let n=function(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t){if(!Number.isSafeInteger(t))throw new Error(`Invalid pedersenArg: ${t}`);e=BigInt(t)}else e=x(fe(t));if(!(0n<=e&&e<ue.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${e}`);return e}(e);for(let e=0;e<252;e++){const s=r[e];if(s.equals(t))throw new Error("Same point");0n!==(1n&n)&&(t=t.add(s)),n>>=1n}return t}function Ue(t,e){let r=Ne[0];return r=Pe(r,t,De),r=Pe(r,e,Fe),xe(r.toRawBytes(!0))}const Le=(t,e=Ue)=>[0,...t,t.length].reduce(((t,r)=>e(t,r))),$e=N(250),He=t=>x(gt(t))&$e,ze=t=>x(vt(t)),Ve=Ut(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function je(t,e,r){const n=t.fromBytes(vt(W(`${e}${r}`)));return t.create(n)}function Me(t,e,r,n=0){const s=[],a=[];for(let i=0;i<r;i++)s.push(je(t,`${e}x`,n*r+i)),a.push(je(t,`${e}y`,n*r+i));if(new Set([...s,...a]).size!==2*r)throw new Error("X and Y values are not distinct");return s.map((e=>a.map((r=>t.inv(t.sub(e,r))))))}const qe=[[3,1,1],[1,-1,1],[1,1,-2]].map((t=>t.map(BigInt)));function Ze(t,e){if(Dt(t.Fp),!Number.isSafeInteger(t.rate)||!Number.isSafeInteger(t.capacity))throw new Error(`Wrong poseidon opts: ${t}`);const r=t.rate+t.capacity,n=t.roundsFull+t.roundsPartial,s=[];for(let e=0;e<n;e++){const n=[];for(let s=0;s<r;s++)n.push(je(t.Fp,"Hades",r*e+s));s.push(n)}const a=Vt({...t,t:r,sboxPower:3,reversePartialPowIdx:!0,mds:e,roundConstants:s});return a.m=r,a.rate=t.rate,a.capacity=t.capacity,a}function Ke(t,e=0){const r=t.rate+t.capacity;if(!Number.isSafeInteger(e))throw new Error(`Wrong mdsAttempt=${e}`);return Ze(t,Me(t.Fp,"HadesMDS",r,e))}const Ge=Ze({Fp:Ve,rate:2,capacity:1,roundsFull:8,roundsPartial:83},qe);function Ye(t,e,r=Ge){return r([t,e,2n])[0]}function We(t,e,r=Ge){return T(Ye(x(t),x(e),r))}function Xe(t,e=Ge){return e([t,0n,1n])[0]}function Je(t,e=Ge){const{m:r,rate:n}=e;if(!Array.isArray(t))throw new Error("bigint array expected in values");const s=Array.from(t);for(s.push(1n);s.length%n!=0;)s.push(0n);let a=new Array(r).fill(0n);for(let t=0;t<s.length;t+=n){for(let e=0;e<n;e++)a[e]+=s[t+e];a=e(a)}return a[0]}function Qe(t){return tr.test(t)}var tr=/^-?[0-9]+$/;function er(t){return rr.test(t)}var rr=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/,nr=function(t){return t.underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t}({});function sr(t){return t.replace(ar,"").replace(or,"").replace(cr,"").replace(ir,"")}var ar=/[eE][+-]?\d+$/,ir=/^-?(0*)?/,or=/\./,cr=/0+$/;function lr(t){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dr(n.key),n)}}function dr(t){var e=function(t,e){if("object"!==lr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===lr(e)?e:String(e)}var hr=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=dr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"isLosslessNumber",!0),!er(e))throw new Error('Invalid number (value: "'+e+'")');this.value=e}var e,r;return e=t,(r=[{key:"valueOf",value:function(){var t=function(t){if(!function(t,e){var r=parseFloat(t),n=String(r),s=sr(t),a=sr(n);return s===a||!!(!0===(null==e?void 0:e.approx)&&!Qe(t)&&a.length>=14&&s.startsWith(a.substring(0,14)))}(t,{approx:!1})){if(Qe(t))return nr.truncate_integer;var e=parseFloat(t);return isFinite(e)?0===e?nr.underflow:nr.truncate_float:nr.overflow}}(this.value);if(void 0===t||t===nr.truncate_float)return parseFloat(this.value);if(Qe(this.value))return BigInt(this.value);throw new Error("Cannot safely convert to number: "+"the value '".concat(this.value,"' would ").concat(t," and become ").concat(parseFloat(this.value)))}},{key:"toString",value:function(){return this.value}}])&&ur(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fr(t){return new hr(t)}function pr(t){return Qe(t)?BigInt(t):parseFloat(t)}function gr(t){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gr(t)}function yr(t,e,r,n){return Array.isArray(r)?n.call(t,e,function(t,e){for(var r=0;r<t.length;r++)t[r]=yr(t,r+"",t[r],e);return t}(r,n)):r&&"object"===gr(r)&&!function(t){return t&&"object"===lr(t)&&!0===t.isLosslessNumber||!1}(r)?n.call(t,e,function(t,e){return Object.keys(t).forEach((function(r){var n=yr(t,r,t[r],e);void 0!==n?t[r]=n:delete t[r]})),t}(r,n)):n.call(t,e,r)}function mr(t){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(t)}function _r(t){return function(t){if(Array.isArray(t))return wr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return wr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function br(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr,n=0,s=a();return function(t){if(void 0===t)throw new SyntaxError("JSON value expected ".concat(b()))}(s),function(){if(n<t.length)throw new SyntaxError("Expected end of input ".concat(b()))}(),e?function(t,e){return yr({"":t},"",t,e)}(s,e):s;function a(){var e,s,g,y,_,w;o();var E=null!==(e=null!==(s=null!==(g=null!==(y=null!==(_=null!==(w=c())&&void 0!==w?w:function(){var e,s=n;if(t.charCodeAt(n)===Ur&&(n++,h(s)),t.charCodeAt(n)===Lr)n++;else if((e=t.charCodeAt(n))>=$r&&e<=Hr)for(n++;vr(t.charCodeAt(n));)n++;if(t.charCodeAt(n)===Vr)for(n++,h(s);vr(t.charCodeAt(n));)n++;if(t.charCodeAt(n)===Kr||t.charCodeAt(n)===Zr)for(n++,t.charCodeAt(n)!==Ur&&t.charCodeAt(n)!==Pr||n++,h(s);vr(t.charCodeAt(n));)n++;if(n>s)return r(t.slice(s,n))}())&&void 0!==_?_:function(){if(t.charCodeAt(n)===Cr){n++,o();for(var e={},r=!0;n<t.length&&t.charCodeAt(n)!==Ir;){r?r=!1:(l(),o());var s=n,i=c();void 0===i&&f(),o(),u();var d=a();void 0===d&&m(),Object.prototype.hasOwnProperty.call(e,i)&&!kr(d,e[i])&&p(i,s+1),e[i]=d}return t.charCodeAt(n)!==Ir&&function(){throw new SyntaxError("Quoted object key or end of object '}' expected ".concat(b()))}(),n++,e}}())&&void 0!==y?y:function(){if(t.charCodeAt(n)===Tr){n++,o();for(var e=[],r=!0;n<t.length&&t.charCodeAt(n)!==Or;){r?r=!1:l();var s=a();d(s),e.push(s)}return t.charCodeAt(n)!==Or&&function(){throw new SyntaxError("Array item or end of array ']' expected ".concat(b()))}(),n++,e}}())&&void 0!==g?g:i("true",!0))&&void 0!==s?s:i("false",!1))&&void 0!==e?e:i("null",null);return o(),E}function i(e,r){if(t.slice(n,n+e.length)===e)return n+=e.length,r}function o(){for(;(e=t.charCodeAt(n))===Rr||e===Nr||e===Br||e===Dr;)n++;var e}function c(){if(t.charCodeAt(n)===Fr){n++;for(var e="";n<t.length&&t.charCodeAt(n)!==Fr;){if(t.charCodeAt(n)===Sr){var r=t[n+1],s=xr[r];void 0!==s?(e+=s,n++):"u"===r?Er(t.charCodeAt(n+2))&&Er(t.charCodeAt(n+3))&&Er(t.charCodeAt(n+4))&&Er(t.charCodeAt(n+5))?(e+=String.fromCharCode(parseInt(t.slice(n+2,n+6),16)),n+=5):_(n):y(n)}else(a=t.charCodeAt(n))>=32&&a<=1114111?e+=t[n]:g(t[n]);n++}return function(){if(t.charCodeAt(n)!==Fr)throw new SyntaxError("End of string '\"' expected ".concat(b()))}(),n++,e}var a}function l(){if(t.charCodeAt(n)!==zr)throw new SyntaxError("Comma ',' expected after value ".concat(b()));n++}function u(){if(t.charCodeAt(n)!==jr)throw new SyntaxError("Colon ':' expected after property name ".concat(b()));n++}function d(t){if(void 0===t)throw new SyntaxError("Array item expected ".concat(b()))}function h(e){if(!vr(t.charCodeAt(n))){var r=t.slice(e,n);throw new SyntaxError("Invalid number '".concat(r,"', expecting a digit ").concat(b()))}}function f(){throw new SyntaxError("Quoted object key expected ".concat(b()))}function p(t,e){throw new SyntaxError("Duplicate key '".concat(t,"' encountered at position ").concat(e))}function g(t){throw new SyntaxError("Invalid character '".concat(t,"' ").concat(w()))}function y(e){var r=t.slice(e,e+2);throw new SyntaxError("Invalid escape character '".concat(r,"' ").concat(w()))}function m(){throw new SyntaxError("Object value expected after ':' ".concat(w()))}function _(e){for(var r=e+2;/\w/.test(t[r]);)r++;var n=t.slice(e,r);throw new SyntaxError("Invalid unicode character '".concat(n,"' ").concat(w()))}function w(){return"at position ".concat(n)}function b(){return(n<t.length?"but got '".concat(t[n],"'"):"but reached end of input")+" "+w()}}function Er(t){return t>=Lr&&t<=Hr||t>=Mr&&t<=Gr||t>=qr&&t<=Yr}function vr(t){return t>=Lr&&t<=Hr}function kr(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((function(t,r){return kr(t,e[r])})):!(!Ar(t)||!Ar(e))&&_r(new Set([].concat(_r(Object.keys(t)),_r(Object.keys(e))))).every((function(r){return kr(t[r],e[r])})))}function Ar(t){return"object"===mr(t)&&null!==t}var xr={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},Sr=92,Cr=123,Ir=125,Tr=91,Or=93,Rr=32,Nr=10,Br=9,Dr=13,Fr=34,Pr=43,Ur=45,Lr=48,$r=49,Hr=57,zr=44,Vr=46,jr=58,Mr=65,qr=97,Zr=69,Kr=101,Gr=70,Yr=102;function Wr(t){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wr(t)}function Xr(t,e,r,n){var s=function(t){return"number"==typeof t?" ".repeat(t):"string"==typeof t&&""!==t?t:void 0}(r);return function t(a,i){if(Array.isArray(n)){var o=n.find((function(t){return t.test(a)}));if(o){var c=o.stringify(a);if("string"!=typeof c||!er(c))throw new Error("Invalid JSON number: output of a number stringifier must be a string containing a JSON number "+"(output: ".concat(c,")"));return c}}return"boolean"==typeof a||"number"==typeof a||"string"==typeof a||null===a||a instanceof Date||a instanceof Boolean||a instanceof Number||a instanceof String?JSON.stringify(a):a&&a.isLosslessNumber||"bigint"==typeof a?a.toString():Array.isArray(a)?function(r,n){if(0===r.length)return"[]";for(var a=s?n+s:void 0,i=s?"[\n":"[",o=0;o<r.length;o++){var c="function"==typeof e?e.call(r,String(o),r[o]):r[o];s&&(i+=a),i+=void 0!==c&&"function"!=typeof c?t(c,a):"null",o<r.length-1&&(i+=s?",\n":",")}return i+=s?"\n"+n+"]":"]"}(a,i):a&&"object"===Wr(a)?function(n,a){if("function"==typeof n.toJSON)return Xr(n.toJSON(),e,r,void 0);var i=Array.isArray(e)?e.map(String):Object.keys(n);if(0===i.length)return"{}";var o=s?a+s:void 0,c=!0,l=s?"{\n":"{";return i.forEach((function(r){var a="function"==typeof e?e.call(n,r,n[r]):n[r];if(function(t,e){return void 0!==e&&"function"!=typeof e&&"symbol"!==Wr(e)}(0,a)){c?c=!1:l+=s?",\n":",";var i=JSON.stringify(r);l+=s?o+i+": ":i+":",l+=t(a,o)}})),l+=s?"\n"+a+"}":"}"}(a,i):void 0}("function"==typeof e?e.call({"":t},"",t):t,"")}function Jr(t){let e=t.length;for(;--e>=0;)t[e]=0}const Qr=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),tn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),en=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),rn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nn=new Array(576);Jr(nn);const sn=new Array(60);Jr(sn);const an=new Array(512);Jr(an);const on=new Array(256);Jr(on);const cn=new Array(29);Jr(cn);const ln=new Array(30);function un(t,e,r,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}let dn,hn,fn;function pn(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}Jr(ln);const gn=t=>t<256?an[t]:an[256+(t>>>7)],yn=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},mn=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,yn(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},_n=(t,e,r)=>{mn(t,r[2*e],r[2*e+1])},wn=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},bn=(t,e,r)=>{const n=new Array(16);let s,a,i=0;for(s=1;s<=15;s++)i=i+r[s-1]<<1,n[s]=i;for(a=0;a<=e;a++){let e=t[2*a+1];0!==e&&(t[2*a]=wn(n[e]++,e))}},En=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},vn=t=>{t.bi_valid>8?yn(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},kn=(t,e,r,n)=>{const s=2*e,a=2*r;return t[s]<t[a]||t[s]===t[a]&&n[e]<=n[r]},An=(t,e,r)=>{const n=t.heap[r];let s=r<<1;for(;s<=t.heap_len&&(s<t.heap_len&&kn(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!kn(e,n,t.heap[s],t.depth));)t.heap[r]=t.heap[s],r=s,s<<=1;t.heap[r]=n},xn=(t,e,r)=>{let n,s,a,i,o=0;if(0!==t.sym_next)do{n=255&t.pending_buf[t.sym_buf+o++],n+=(255&t.pending_buf[t.sym_buf+o++])<<8,s=t.pending_buf[t.sym_buf+o++],0===n?_n(t,s,e):(a=on[s],_n(t,a+256+1,e),i=Qr[a],0!==i&&(s-=cn[a],mn(t,s,i)),n--,a=gn(n),_n(t,a,r),i=tn[a],0!==i&&(n-=ln[a],mn(t,n,i)))}while(o<t.sym_next);_n(t,256,e)},Sn=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.elems;let i,o,c,l=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<a;i++)0!==r[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):r[2*i+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,r[2*c]=1,t.depth[c]=0,t.opt_len--,s&&(t.static_len-=n[2*c+1]);for(e.max_code=l,i=t.heap_len>>1;i>=1;i--)An(t,r,i);c=a;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],An(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=o,r[2*c]=r[2*i]+r[2*o],t.depth[c]=(t.depth[i]>=t.depth[o]?t.depth[i]:t.depth[o])+1,r[2*i+1]=r[2*o+1]=c,t.heap[1]=c++,An(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,i=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length;let l,u,d,h,f,p,g=0;for(h=0;h<=15;h++)t.bl_count[h]=0;for(r[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<573;l++)u=t.heap[l],h=r[2*r[2*u+1]+1]+1,h>c&&(h=c,g++),r[2*u+1]=h,u>n||(t.bl_count[h]++,f=0,u>=o&&(f=i[u-o]),p=r[2*u],t.opt_len+=p*(h+f),a&&(t.static_len+=p*(s[2*u+1]+f)));if(0!==g){do{for(h=c-1;0===t.bl_count[h];)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(h=c;0!==h;h--)for(u=t.bl_count[h];0!==u;)d=t.heap[--l],d>n||(r[2*d+1]!==h&&(t.opt_len+=(h-r[2*d+1])*r[2*d],r[2*d+1]=h),u--)}})(t,e),bn(r,l,t.bl_count)},Cn=(t,e,r)=>{let n,s,a=-1,i=e[1],o=0,c=7,l=4;for(0===i&&(c=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)s=i,i=e[2*(n+1)+1],++o<c&&s===i||(o<l?t.bl_tree[2*s]+=o:0!==s?(s!==a&&t.bl_tree[2*s]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,a=s,0===i?(c=138,l=3):s===i?(c=6,l=3):(c=7,l=4))},In=(t,e,r)=>{let n,s,a=-1,i=e[1],o=0,c=7,l=4;for(0===i&&(c=138,l=3),n=0;n<=r;n++)if(s=i,i=e[2*(n+1)+1],!(++o<c&&s===i)){if(o<l)do{_n(t,s,t.bl_tree)}while(0!=--o);else 0!==s?(s!==a&&(_n(t,s,t.bl_tree),o--),_n(t,16,t.bl_tree),mn(t,o-3,2)):o<=10?(_n(t,17,t.bl_tree),mn(t,o-3,3)):(_n(t,18,t.bl_tree),mn(t,o-11,7));o=0,a=s,0===i?(c=138,l=3):s===i?(c=6,l=3):(c=7,l=4)}};let Tn=!1;const On=(t,e,r,n)=>{mn(t,0+(n?1:0),3),vn(t),yn(t,r),yn(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r};var Rn={_tr_init:t=>{Tn||((()=>{let t,e,r,n,s;const a=new Array(16);for(r=0,n=0;n<28;n++)for(cn[n]=r,t=0;t<1<<Qr[n];t++)on[r++]=n;for(on[r-1]=n,s=0,n=0;n<16;n++)for(ln[n]=s,t=0;t<1<<tn[n];t++)an[s++]=n;for(s>>=7;n<30;n++)for(ln[n]=s<<7,t=0;t<1<<tn[n]-7;t++)an[256+s++]=n;for(e=0;e<=15;e++)a[e]=0;for(t=0;t<=143;)nn[2*t+1]=8,t++,a[8]++;for(;t<=255;)nn[2*t+1]=9,t++,a[9]++;for(;t<=279;)nn[2*t+1]=7,t++,a[7]++;for(;t<=287;)nn[2*t+1]=8,t++,a[8]++;for(bn(nn,287,a),t=0;t<30;t++)sn[2*t+1]=5,sn[2*t]=wn(t,5);dn=new un(nn,Qr,257,286,15),hn=new un(sn,tn,0,30,15),fn=new un(new Array(0),en,0,19,7)})(),Tn=!0),t.l_desc=new pn(t.dyn_ltree,dn),t.d_desc=new pn(t.dyn_dtree,hn),t.bl_desc=new pn(t.bl_tree,fn),t.bi_buf=0,t.bi_valid=0,En(t)},_tr_stored_block:On,_tr_flush_block:(t,e,r,n)=>{let s,a,i=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),Sn(t,t.l_desc),Sn(t,t.d_desc),i=(t=>{let e;for(Cn(t,t.dyn_ltree,t.l_desc.max_code),Cn(t,t.dyn_dtree,t.d_desc.max_code),Sn(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*rn[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),s=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=s&&(s=a)):s=a=r+5,r+4<=s&&-1!==e?On(t,e,r,n):4===t.strategy||a===s?(mn(t,2+(n?1:0),3),xn(t,nn,sn)):(mn(t,4+(n?1:0),3),((t,e,r,n)=>{let s;for(mn(t,e-257,5),mn(t,r-1,5),mn(t,n-4,4),s=0;s<n;s++)mn(t,t.bl_tree[2*rn[s]+1],3);In(t,t.dyn_ltree,e-1),In(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,i+1),xn(t,t.dyn_ltree,t.dyn_dtree)),En(t),n&&vn(t)},_tr_tally:(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(on[r]+256+1)]++,t.dyn_dtree[2*gn(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{mn(t,2,3),_n(t,256,nn),(t=>{16===t.bi_valid?(yn(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},Nn=(t,e,r,n)=>{let s=65535&t,a=t>>>16&65535,i=0;for(;0!==r;){i=r>2e3?2e3:r,r-=i;do{s=s+e[n++]|0,a=a+s|0}while(--i);s%=65521,a%=65521}return s|a<<16};const Bn=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var Dn=(t,e,r,n)=>{const s=Bn,a=n+r;t^=-1;for(let r=n;r<a;r++)t=t>>>8^s[255&(t^e[r])];return~t},Fn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Pn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Un,_tr_stored_block:Ln,_tr_flush_block:$n,_tr_tally:Hn,_tr_align:zn}=Rn,{Z_NO_FLUSH:Vn,Z_PARTIAL_FLUSH:jn,Z_FULL_FLUSH:Mn,Z_FINISH:qn,Z_BLOCK:Zn,Z_OK:Kn,Z_STREAM_END:Gn,Z_STREAM_ERROR:Yn,Z_DATA_ERROR:Wn,Z_BUF_ERROR:Xn,Z_DEFAULT_COMPRESSION:Jn,Z_FILTERED:Qn,Z_HUFFMAN_ONLY:ts,Z_RLE:es,Z_FIXED:rs,Z_DEFAULT_STRATEGY:ns,Z_UNKNOWN:ss,Z_DEFLATED:as}=Pn,is=258,os=262,cs=42,ls=113,us=666,ds=(t,e)=>(t.msg=Fn[e],e),hs=t=>2*t-(t>4?9:0),fs=t=>{let e=t.length;for(;--e>=0;)t[e]=0},ps=t=>{let e,r,n,s=t.w_size;e=t.hash_size,n=e;do{r=t.head[--n],t.head[n]=r>=s?r-s:0}while(--e);e=s,n=e;do{r=t.prev[--n],t.prev[n]=r>=s?r-s:0}while(--e)};let gs=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const ys=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},ms=(t,e)=>{$n(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ys(t.strm)},_s=(t,e)=>{t.pending_buf[t.pending++]=e},ws=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},bs=(t,e,r,n)=>{let s=t.avail_in;return s>n&&(s=n),0===s?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),r),1===t.state.wrap?t.adler=Nn(t.adler,e,s,r):2===t.state.wrap&&(t.adler=Dn(t.adler,e,s,r)),t.next_in+=s,t.total_in+=s,s)},Es=(t,e)=>{let r,n,s=t.max_chain_length,a=t.strstart,i=t.prev_length,o=t.nice_match;const c=t.strstart>t.w_size-os?t.strstart-(t.w_size-os):0,l=t.window,u=t.w_mask,d=t.prev,h=t.strstart+is;let f=l[a+i-1],p=l[a+i];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do{if(r=e,l[r+i]===p&&l[r+i-1]===f&&l[r]===l[a]&&l[++r]===l[a+1]){a+=2,r++;do{}while(l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&a<h);if(n=is-(h-a),a=h-is,n>i){if(t.match_start=e,i=n,n>=o)break;f=l[a+i-1],p=l[a+i]}}}while((e=d[e&u])>c&&0!=--s);return i<=t.lookahead?i:t.lookahead},vs=t=>{const e=t.w_size;let r,n,s;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-os)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),ps(t),n+=e),0===t.strm.avail_in)break;if(r=bs(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=gs(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=gs(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<os&&0!==t.strm.avail_in)},ks=(t,e)=>{let r,n,s,a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,i=0,o=t.strm.avail_in;do{if(r=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s)break;if(s=t.strm.avail_out-s,n=t.strstart-t.block_start,r>n+t.strm.avail_in&&(r=n+t.strm.avail_in),r>s&&(r=s),r<a&&(0===r&&e!==qn||e===Vn||r!==n+t.strm.avail_in))break;i=e===qn&&r===n+t.strm.avail_in?1:0,Ln(t,0,0,i),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,ys(t.strm),n&&(n>r&&(n=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,r-=n),r&&(bs(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(0===i);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),i?4:e!==Vn&&e!==qn&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(bs(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,a=s>t.w_size?t.w_size:s,n=t.strstart-t.block_start,(n>=a||(n||e===qn)&&e!==Vn&&0===t.strm.avail_in&&n<=s)&&(r=n>s?s:n,i=e===qn&&0===t.strm.avail_in&&r===n?1:0,Ln(t,t.block_start,r,i),t.block_start+=r,ys(t.strm)),i?3:1)},As=(t,e)=>{let r,n;for(;;){if(t.lookahead<os){if(vs(t),t.lookahead<os&&e===Vn)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=gs(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-os&&(t.match_length=Es(t,r)),t.match_length>=3)if(n=Hn(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=gs(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=gs(t,t.ins_h,t.window[t.strstart+1]);else n=Hn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(ms(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===qn?(ms(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ms(t,!1),0===t.strm.avail_out)?1:2},xs=(t,e)=>{let r,n,s;for(;;){if(t.lookahead<os){if(vs(t),t.lookahead<os&&e===Vn)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=gs(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-os&&(t.match_length=Es(t,r),t.match_length<=5&&(t.strategy===Qn||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,n=Hn(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=gs(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(ms(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=Hn(t,0,t.window[t.strstart-1]),n&&ms(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Hn(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===qn?(ms(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ms(t,!1),0===t.strm.avail_out)?1:2};function Ss(t,e,r,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=s}const Cs=[new Ss(0,0,0,0,ks),new Ss(4,4,8,4,As),new Ss(4,5,16,8,As),new Ss(4,6,32,32,As),new Ss(4,4,16,16,xs),new Ss(8,16,32,32,xs),new Ss(8,16,128,128,xs),new Ss(8,32,128,256,xs),new Ss(32,128,258,1024,xs),new Ss(32,258,258,4096,xs)];function Is(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=as,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),fs(this.dyn_ltree),fs(this.dyn_dtree),fs(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),fs(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),fs(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ts=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==cs&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==ls&&e.status!==us?1:0},Os=t=>{if(Ts(t))return ds(t,Yn);t.total_in=t.total_out=0,t.data_type=ss;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?cs:ls,t.adler=2===e.wrap?0:1,e.last_flush=-2,Un(e),Kn},Rs=t=>{const e=Os(t);var r;return e===Kn&&((r=t.state).window_size=2*r.w_size,fs(r.head),r.max_lazy_match=Cs[r.level].max_lazy,r.good_match=Cs[r.level].good_length,r.nice_match=Cs[r.level].nice_length,r.max_chain_length=Cs[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},Ns=(t,e,r,n,s,a)=>{if(!t)return Yn;let i=1;if(e===Jn&&(e=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),s<1||s>9||r!==as||n<8||n>15||e<0||e>9||a<0||a>rs||8===n&&1!==i)return ds(t,Yn);8===n&&(n=9);const o=new Is;return t.state=o,o.strm=t,o.status=cs,o.wrap=i,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=a,o.method=r,Rs(t)};var Bs={deflateInit:(t,e)=>Ns(t,e,as,15,8,ns),deflateInit2:Ns,deflateReset:Rs,deflateResetKeep:Os,deflateSetHeader:(t,e)=>Ts(t)||2!==t.state.wrap?Yn:(t.state.gzhead=e,Kn),deflate:(t,e)=>{if(Ts(t)||e>Zn||e<0)return t?ds(t,Yn):Yn;const r=t.state;if(!t.output||0!==t.avail_in&&!t.input||r.status===us&&e!==qn)return ds(t,0===t.avail_out?Xn:Yn);const n=r.last_flush;if(r.last_flush=e,0!==r.pending){if(ys(t),0===t.avail_out)return r.last_flush=-1,Kn}else if(0===t.avail_in&&hs(e)<=hs(n)&&e!==qn)return ds(t,Xn);if(r.status===us&&0!==t.avail_in)return ds(t,Xn);if(r.status===cs&&0===r.wrap&&(r.status=ls),r.status===cs){let e=as+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=ts||r.level<2?0:r.level<6?1:6===r.level?2:3,e|=n<<6,0!==r.strstart&&(e|=32),e+=31-e%31,ws(r,e),0!==r.strstart&&(ws(r,t.adler>>>16),ws(r,65535&t.adler)),t.adler=1,r.status=ls,ys(t),0!==r.pending)return r.last_flush=-1,Kn}if(57===r.status)if(t.adler=0,_s(r,31),_s(r,139),_s(r,8),r.gzhead)_s(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),_s(r,255&r.gzhead.time),_s(r,r.gzhead.time>>8&255),_s(r,r.gzhead.time>>16&255),_s(r,r.gzhead.time>>24&255),_s(r,9===r.level?2:r.strategy>=ts||r.level<2?4:0),_s(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(_s(r,255&r.gzhead.extra.length),_s(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Dn(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(_s(r,0),_s(r,0),_s(r,0),_s(r,0),_s(r,0),_s(r,9===r.level?2:r.strategy>=ts||r.level<2?4:0),_s(r,3),r.status=ls,ys(t),0!==r.pending)return r.last_flush=-1,Kn;if(69===r.status){if(r.gzhead.extra){let e=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>e&&(t.adler=Dn(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex+=s,ys(t),0!==r.pending)return r.last_flush=-1,Kn;e=0,n-=s}let s=new Uint8Array(r.gzhead.extra);r.pending_buf.set(s.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>e&&(t.adler=Dn(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=Dn(t.adler,r.pending_buf,r.pending-n,n)),ys(t),0!==r.pending)return r.last_flush=-1,Kn;n=0}e=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,_s(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=Dn(t.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=Dn(t.adler,r.pending_buf,r.pending-n,n)),ys(t),0!==r.pending)return r.last_flush=-1,Kn;n=0}e=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,_s(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=Dn(t.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(ys(t),0!==r.pending))return r.last_flush=-1,Kn;_s(r,255&t.adler),_s(r,t.adler>>8&255),t.adler=0}if(r.status=ls,ys(t),0!==r.pending)return r.last_flush=-1,Kn}if(0!==t.avail_in||0!==r.lookahead||e!==Vn&&r.status!==us){let n=0===r.level?ks(r,e):r.strategy===ts?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(vs(t),0===t.lookahead)){if(e===Vn)return 1;break}if(t.match_length=0,r=Hn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(ms(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===qn?(ms(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ms(t,!1),0===t.strm.avail_out)?1:2})(r,e):r.strategy===es?((t,e)=>{let r,n,s,a;const i=t.window;for(;;){if(t.lookahead<=is){if(vs(t),t.lookahead<=is&&e===Vn)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=t.strstart-1,n=i[s],n===i[++s]&&n===i[++s]&&n===i[++s])){a=t.strstart+is;do{}while(n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&s<a);t.match_length=is-(a-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=Hn(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Hn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(ms(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===qn?(ms(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ms(t,!1),0===t.strm.avail_out)?1:2})(r,e):Cs[r.level].func(r,e);if(3!==n&&4!==n||(r.status=us),1===n||3===n)return 0===t.avail_out&&(r.last_flush=-1),Kn;if(2===n&&(e===jn?zn(r):e!==Zn&&(Ln(r,0,0,!1),e===Mn&&(fs(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),ys(t),0===t.avail_out))return r.last_flush=-1,Kn}return e!==qn?Kn:r.wrap<=0?Gn:(2===r.wrap?(_s(r,255&t.adler),_s(r,t.adler>>8&255),_s(r,t.adler>>16&255),_s(r,t.adler>>24&255),_s(r,255&t.total_in),_s(r,t.total_in>>8&255),_s(r,t.total_in>>16&255),_s(r,t.total_in>>24&255)):(ws(r,t.adler>>>16),ws(r,65535&t.adler)),ys(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Kn:Gn)},deflateEnd:t=>{if(Ts(t))return Yn;const e=t.state.status;return t.state=null,e===ls?ds(t,Wn):Kn},deflateSetDictionary:(t,e)=>{let r=e.length;if(Ts(t))return Yn;const n=t.state,s=n.wrap;if(2===s||1===s&&n.status!==cs||n.lookahead)return Yn;if(1===s&&(t.adler=Nn(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===s&&(fs(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const a=t.avail_in,i=t.next_in,o=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,vs(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=gs(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,vs(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=i,t.input=o,t.avail_in=a,n.wrap=s,Kn},deflateInfo:"pako deflate (from Nodeca project)"};const Ds=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Fs={assign:function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)Ds(r,e)&&(t[e]=r[e])}}return t},flattenChunks:t=>{let e=0;for(let r=0,n=t.length;r<n;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,n=0,s=t.length;e<s;e++){let s=t[e];r.set(s,n),n+=s.length}return r}};let Ps=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ps=!1}const Us=new Uint8Array(256);for(let t=0;t<256;t++)Us[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Us[254]=Us[254]=1;var Ls={string2buf:t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,r,n,s,a,i=t.length,o=0;for(s=0;s<i;s++)r=t.charCodeAt(s),55296==(64512&r)&&s+1<i&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),s++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),a=0,s=0;a<o;s++)r=t.charCodeAt(s),55296==(64512&r)&&s+1<i&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},buf2string:(t,e)=>{const r=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,s;const a=new Array(2*r);for(s=0,n=0;n<r;){let e=t[n++];if(e<128){a[s++]=e;continue}let i=Us[e];if(i>4)a[s++]=65533,n+=i-1;else{for(e&=2===i?31:3===i?15:7;i>1&&n<r;)e=e<<6|63&t[n++],i--;i>1?a[s++]=65533:e<65536?a[s++]=e:(e-=65536,a[s++]=55296|e>>10&1023,a[s++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ps)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r})(a,s)},utf8border:(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+Us[t[r]]>e?r:e}},$s=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Hs=Object.prototype.toString,{Z_NO_FLUSH:zs,Z_SYNC_FLUSH:Vs,Z_FULL_FLUSH:js,Z_FINISH:Ms,Z_OK:qs,Z_STREAM_END:Zs,Z_DEFAULT_COMPRESSION:Ks,Z_DEFAULT_STRATEGY:Gs,Z_DEFLATED:Ys}=Pn;function Ws(t){this.options=Fs.assign({level:Ks,method:Ys,chunkSize:16384,windowBits:15,memLevel:8,strategy:Gs},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $s,this.strm.avail_out=0;let r=Bs.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==qs)throw new Error(Fn[r]);if(e.header&&Bs.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Ls.string2buf(e.dictionary):"[object ArrayBuffer]"===Hs.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=Bs.deflateSetDictionary(this.strm,t),r!==qs)throw new Error(Fn[r]);this._dict_set=!0}}function Xs(t,e){const r=new Ws(e);if(r.push(t,!0),r.err)throw r.msg||Fn[r.err];return r.result}Ws.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=e===~~e?e:!0===e?Ms:zs,"string"==typeof t?r.input=Ls.string2buf(t):"[object ArrayBuffer]"===Hs.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===Vs||a===js)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(s=Bs.deflate(r,a),s===Zs)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=Bs.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===qs;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Ws.prototype.onData=function(t){this.chunks.push(t)},Ws.prototype.onEnd=function(t){t===qs&&(this.result=Fs.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Js={Deflate:Ws,deflate:Xs,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Xs(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Xs(t,e)},constants:Pn};const Qs=16209;var ta=function(t,e){let r,n,s,a,i,o,c,l,u,d,h,f,p,g,y,m,_,w,b,E,v,k,A,x;const S=t.state;r=t.next_in,A=t.input,n=r+(t.avail_in-5),s=t.next_out,x=t.output,a=s-(e-t.avail_out),i=s+(t.avail_out-257),o=S.dmax,c=S.wsize,l=S.whave,u=S.wnext,d=S.window,h=S.hold,f=S.bits,p=S.lencode,g=S.distcode,y=(1<<S.lenbits)-1,m=(1<<S.distbits)-1;t:do{f<15&&(h+=A[r++]<<f,f+=8,h+=A[r++]<<f,f+=8),_=p[h&y];e:for(;;){if(w=_>>>24,h>>>=w,f-=w,w=_>>>16&255,0===w)x[s++]=65535&_;else{if(!(16&w)){if(64&w){if(32&w){S.mode=16191;break t}t.msg="invalid literal/length code",S.mode=Qs;break t}_=p[(65535&_)+(h&(1<<w)-1)];continue e}for(b=65535&_,w&=15,w&&(f<w&&(h+=A[r++]<<f,f+=8),b+=h&(1<<w)-1,h>>>=w,f-=w),f<15&&(h+=A[r++]<<f,f+=8,h+=A[r++]<<f,f+=8),_=g[h&m];;){if(w=_>>>24,h>>>=w,f-=w,w=_>>>16&255,16&w){if(E=65535&_,w&=15,f<w&&(h+=A[r++]<<f,f+=8,f<w&&(h+=A[r++]<<f,f+=8)),E+=h&(1<<w)-1,E>o){t.msg="invalid distance too far back",S.mode=Qs;break t}if(h>>>=w,f-=w,w=s-a,E>w){if(w=E-w,w>l&&S.sane){t.msg="invalid distance too far back",S.mode=Qs;break t}if(v=0,k=d,0===u){if(v+=c-w,w<b){b-=w;do{x[s++]=d[v++]}while(--w);v=s-E,k=x}}else if(u<w){if(v+=c+u-w,w-=u,w<b){b-=w;do{x[s++]=d[v++]}while(--w);if(v=0,u<b){w=u,b-=w;do{x[s++]=d[v++]}while(--w);v=s-E,k=x}}}else if(v+=u-w,w<b){b-=w;do{x[s++]=d[v++]}while(--w);v=s-E,k=x}for(;b>2;)x[s++]=k[v++],x[s++]=k[v++],x[s++]=k[v++],b-=3;b&&(x[s++]=k[v++],b>1&&(x[s++]=k[v++]))}else{v=s-E;do{x[s++]=x[v++],x[s++]=x[v++],x[s++]=x[v++],b-=3}while(b>2);b&&(x[s++]=x[v++],b>1&&(x[s++]=x[v++]))}break}if(64&w){t.msg="invalid distance code",S.mode=Qs;break t}_=g[(65535&_)+(h&(1<<w)-1)]}}break}}while(r<n&&s<i);b=f>>3,r-=b,f-=b<<3,h&=(1<<f)-1,t.next_in=r,t.next_out=s,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=s<i?i-s+257:257-(s-i),S.hold=h,S.bits=f};const ea=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ra=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),na=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),sa=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var aa=(t,e,r,n,s,a,i,o)=>{const c=o.bits;let l,u,d,h,f,p,g=0,y=0,m=0,_=0,w=0,b=0,E=0,v=0,k=0,A=0,x=null;const S=new Uint16Array(16),C=new Uint16Array(16);let I,T,O,R=null;for(g=0;g<=15;g++)S[g]=0;for(y=0;y<n;y++)S[e[r+y]]++;for(w=c,_=15;_>=1&&0===S[_];_--);if(w>_&&(w=_),0===_)return s[a++]=20971520,s[a++]=20971520,o.bits=1,0;for(m=1;m<_&&0===S[m];m++);for(w<m&&(w=m),v=1,g=1;g<=15;g++)if(v<<=1,v-=S[g],v<0)return-1;if(v>0&&(0===t||1!==_))return-1;for(C[1]=0,g=1;g<15;g++)C[g+1]=C[g]+S[g];for(y=0;y<n;y++)0!==e[r+y]&&(i[C[e[r+y]]++]=y);if(0===t?(x=R=i,p=20):1===t?(x=ea,R=ra,p=257):(x=na,R=sa,p=0),A=0,y=0,g=m,f=a,b=w,E=0,d=-1,k=1<<w,h=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){I=g-E,i[y]+1<p?(T=0,O=i[y]):i[y]>=p?(T=R[i[y]-p],O=x[i[y]-p]):(T=96,O=0),l=1<<g-E,u=1<<b,m=u;do{u-=l,s[f+(A>>E)+u]=I<<24|T<<16|O}while(0!==u);for(l=1<<g-1;A&l;)l>>=1;if(0!==l?(A&=l-1,A+=l):A=0,y++,0==--S[g]){if(g===_)break;g=e[r+i[y]]}if(g>w&&(A&h)!==d){for(0===E&&(E=w),f+=m,b=g-E,v=1<<b;b+E<_&&(v-=S[b+E],!(v<=0));)b++,v<<=1;if(k+=1<<b,1===t&&k>852||2===t&&k>592)return 1;d=A&h,s[d]=w<<24|b<<16|f-a}}return 0!==A&&(s[f+A]=g-E<<24|64<<16),o.bits=w,0};const{Z_FINISH:ia,Z_BLOCK:oa,Z_TREES:ca,Z_OK:la,Z_STREAM_END:ua,Z_NEED_DICT:da,Z_STREAM_ERROR:ha,Z_DATA_ERROR:fa,Z_MEM_ERROR:pa,Z_BUF_ERROR:ga,Z_DEFLATED:ya}=Pn,ma=16180,_a=16190,wa=16191,ba=16192,Ea=16194,va=16199,ka=16200,Aa=16206,xa=16209,Sa=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Ca(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ia=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<ma||e.mode>16211?1:0},Ta=t=>{if(Ia(t))return ha;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=ma,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,la},Oa=t=>{if(Ia(t))return ha;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Ta(t)},Ra=(t,e)=>{let r;if(Ia(t))return ha;const n=t.state;return e<0?(r=0,e=-e):(r=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?ha:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Oa(t))},Na=(t,e)=>{if(!t)return ha;const r=new Ca;t.state=r,r.strm=t,r.window=null,r.mode=ma;const n=Ra(t,e);return n!==la&&(t.state=null),n};let Ba,Da,Fa=!0;const Pa=t=>{if(Fa){Ba=new Int32Array(512),Da=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(aa(1,t.lens,0,288,Ba,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;aa(2,t.lens,0,32,Da,0,t.work,{bits:5}),Fa=!1}t.lencode=Ba,t.lenbits=9,t.distcode=Da,t.distbits=5},Ua=(t,e,r,n)=>{let s;const a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>n&&(s=n),a.window.set(e.subarray(r-n,r-n+s),a.wnext),(n-=s)?(a.window.set(e.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0};var La={inflateReset:Oa,inflateReset2:Ra,inflateResetKeep:Ta,inflateInit:t=>Na(t,15),inflateInit2:Na,inflate:(t,e)=>{let r,n,s,a,i,o,c,l,u,d,h,f,p,g,y,m,_,w,b,E,v,k,A=0;const x=new Uint8Array(4);let S,C;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ia(t)||!t.output||!t.input&&0!==t.avail_in)return ha;r=t.state,r.mode===wa&&(r.mode=ba),i=t.next_out,s=t.output,c=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,l=r.hold,u=r.bits,d=o,h=c,k=la;t:for(;;)switch(r.mode){case ma:if(0===r.wrap){r.mode=ba;break}for(;u<16;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(2&r.wrap&&35615===l){0===r.wbits&&(r.wbits=15),r.check=0,x[0]=255&l,x[1]=l>>>8&255,r.check=Dn(r.check,x,2,0),l=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",r.mode=xa;break}if((15&l)!==ya){t.msg="unknown compression method",r.mode=xa;break}if(l>>>=4,u-=4,v=8+(15&l),0===r.wbits&&(r.wbits=v),v>15||v>r.wbits){t.msg="invalid window size",r.mode=xa;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=512&l?16189:wa,l=0,u=0;break;case 16181:for(;u<16;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(r.flags=l,(255&r.flags)!==ya){t.msg="unknown compression method",r.mode=xa;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=xa;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&4&r.wrap&&(x[0]=255&l,x[1]=l>>>8&255,r.check=Dn(r.check,x,2,0)),l=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.head&&(r.head.time=l),512&r.flags&&4&r.wrap&&(x[0]=255&l,x[1]=l>>>8&255,x[2]=l>>>16&255,x[3]=l>>>24&255,r.check=Dn(r.check,x,4,0)),l=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&4&r.wrap&&(x[0]=255&l,x[1]=l>>>8&255,r.check=Dn(r.check,x,2,0)),l=0,u=0,r.mode=16184;case 16184:if(1024&r.flags){for(;u<16;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&4&r.wrap&&(x[0]=255&l,x[1]=l>>>8&255,r.check=Dn(r.check,x,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(f=r.length,f>o&&(f=o),f&&(r.head&&(v=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+f),v)),512&r.flags&&4&r.wrap&&(r.check=Dn(r.check,n,f,a)),o-=f,a+=f,r.length-=f),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===o)break t;f=0;do{v=n[a+f++],r.head&&v&&r.length<65536&&(r.head.name+=String.fromCharCode(v))}while(v&&f<o);if(512&r.flags&&4&r.wrap&&(r.check=Dn(r.check,n,f,a)),o-=f,a+=f,v)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===o)break t;f=0;do{v=n[a+f++],r.head&&v&&r.length<65536&&(r.head.comment+=String.fromCharCode(v))}while(v&&f<o);if(512&r.flags&&4&r.wrap&&(r.check=Dn(r.check,n,f,a)),o-=f,a+=f,v)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;u<16;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(4&r.wrap&&l!==(65535&r.check)){t.msg="header crc mismatch",r.mode=xa;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=wa;break;case 16189:for(;u<32;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}t.adler=r.check=Sa(l),l=0,u=0,r.mode=_a;case _a:if(0===r.havedict)return t.next_out=i,t.avail_out=c,t.next_in=a,t.avail_in=o,r.hold=l,r.bits=u,da;t.adler=r.check=1,r.mode=wa;case wa:if(e===oa||e===ca)break t;case ba:if(r.last){l>>>=7&u,u-=7&u,r.mode=Aa;break}for(;u<3;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}switch(r.last=1&l,l>>>=1,u-=1,3&l){case 0:r.mode=16193;break;case 1:if(Pa(r),r.mode=va,e===ca){l>>>=2,u-=2;break t}break;case 2:r.mode=16196;break;case 3:t.msg="invalid block type",r.mode=xa}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",r.mode=xa;break}if(r.length=65535&l,l=0,u=0,r.mode=Ea,e===ca)break t;case Ea:r.mode=16195;case 16195:if(f=r.length,f){if(f>o&&(f=o),f>c&&(f=c),0===f)break t;s.set(n.subarray(a,a+f),i),o-=f,a+=f,c-=f,i+=f,r.length-=f;break}r.mode=wa;break;case 16196:for(;u<14;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=xa;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.lens[I[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},k=aa(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,k){t.msg="invalid code lengths set",r.mode=xa;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;A=r.lencode[l&(1<<r.lenbits)-1],y=A>>>24,m=A>>>16&255,_=65535&A,!(y<=u);){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(_<16)l>>>=y,u-=y,r.lens[r.have++]=_;else{if(16===_){for(C=y+2;u<C;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(l>>>=y,u-=y,0===r.have){t.msg="invalid bit length repeat",r.mode=xa;break}v=r.lens[r.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===_){for(C=y+3;u<C;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}l>>>=y,u-=y,v=0,f=3+(7&l),l>>>=3,u-=3}else{for(C=y+7;u<C;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}l>>>=y,u-=y,v=0,f=11+(127&l),l>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=xa;break}for(;f--;)r.lens[r.have++]=v}}if(r.mode===xa)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=xa;break}if(r.lenbits=9,S={bits:r.lenbits},k=aa(1,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,k){t.msg="invalid literal/lengths set",r.mode=xa;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},k=aa(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,k){t.msg="invalid distances set",r.mode=xa;break}if(r.mode=va,e===ca)break t;case va:r.mode=ka;case ka:if(o>=6&&c>=258){t.next_out=i,t.avail_out=c,t.next_in=a,t.avail_in=o,r.hold=l,r.bits=u,ta(t,h),i=t.next_out,s=t.output,c=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,l=r.hold,u=r.bits,r.mode===wa&&(r.back=-1);break}for(r.back=0;A=r.lencode[l&(1<<r.lenbits)-1],y=A>>>24,m=A>>>16&255,_=65535&A,!(y<=u);){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(m&&!(240&m)){for(w=y,b=m,E=_;A=r.lencode[E+((l&(1<<w+b)-1)>>w)],y=A>>>24,m=A>>>16&255,_=65535&A,!(w+y<=u);){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,r.back+=w}if(l>>>=y,u-=y,r.back+=y,r.length=_,0===m){r.mode=16205;break}if(32&m){r.back=-1,r.mode=wa;break}if(64&m){t.msg="invalid literal/length code",r.mode=xa;break}r.extra=15&m,r.mode=16201;case 16201:if(r.extra){for(C=r.extra;u<C;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;A=r.distcode[l&(1<<r.distbits)-1],y=A>>>24,m=A>>>16&255,_=65535&A,!(y<=u);){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(!(240&m)){for(w=y,b=m,E=_;A=r.distcode[E+((l&(1<<w+b)-1)>>w)],y=A>>>24,m=A>>>16&255,_=65535&A,!(w+y<=u);){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,r.back+=w}if(l>>>=y,u-=y,r.back+=y,64&m){t.msg="invalid distance code",r.mode=xa;break}r.offset=_,r.extra=15&m,r.mode=16203;case 16203:if(r.extra){for(C=r.extra;u<C;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=xa;break}r.mode=16204;case 16204:if(0===c)break t;if(f=h-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=xa;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),g=r.window}else g=s,p=i-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do{s[i++]=g[p++]}while(--f);0===r.length&&(r.mode=ka);break;case 16205:if(0===c)break t;s[i++]=r.length,c--,r.mode=ka;break;case Aa:if(r.wrap){for(;u<32;){if(0===o)break t;o--,l|=n[a++]<<u,u+=8}if(h-=c,t.total_out+=h,r.total+=h,4&r.wrap&&h&&(t.adler=r.check=r.flags?Dn(r.check,s,h,i-h):Nn(r.check,s,h,i-h)),h=c,4&r.wrap&&(r.flags?l:Sa(l))!==r.check){t.msg="incorrect data check",r.mode=xa;break}l=0,u=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;u<32;){if(0===o)break t;o--,l+=n[a++]<<u,u+=8}if(4&r.wrap&&l!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=xa;break}l=0,u=0}r.mode=16208;case 16208:k=ua;break t;case xa:k=fa;break t;case 16210:return pa;default:return ha}return t.next_out=i,t.avail_out=c,t.next_in=a,t.avail_in=o,r.hold=l,r.bits=u,(r.wsize||h!==t.avail_out&&r.mode<xa&&(r.mode<Aa||e!==ia))&&Ua(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,r.total+=h,4&r.wrap&&h&&(t.adler=r.check=r.flags?Dn(r.check,s,h,t.next_out-h):Nn(r.check,s,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===wa?128:0)+(r.mode===va||r.mode===Ea?256:0),(0===d&&0===h||e===ia)&&k===la&&(k=ga),k},inflateEnd:t=>{if(Ia(t))return ha;let e=t.state;return e.window&&(e.window=null),t.state=null,la},inflateGetHeader:(t,e)=>{if(Ia(t))return ha;const r=t.state;return 2&r.wrap?(r.head=e,e.done=!1,la):ha},inflateSetDictionary:(t,e)=>{const r=e.length;let n,s,a;return Ia(t)?ha:(n=t.state,0!==n.wrap&&n.mode!==_a?ha:n.mode===_a&&(s=1,s=Nn(s,e,r,0),s!==n.check)?fa:(a=Ua(t,e,r,r),a?(n.mode=16210,pa):(n.havedict=1,la)))},inflateInfo:"pako inflate (from Nodeca project)"},$a=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ha=Object.prototype.toString,{Z_NO_FLUSH:za,Z_FINISH:Va,Z_OK:ja,Z_STREAM_END:Ma,Z_NEED_DICT:qa,Z_STREAM_ERROR:Za,Z_DATA_ERROR:Ka,Z_MEM_ERROR:Ga}=Pn;function Ya(t){this.options=Fs.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $s,this.strm.avail_out=0;let r=La.inflateInit2(this.strm,e.windowBits);if(r!==ja)throw new Error(Fn[r]);if(this.header=new $a,La.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Ls.string2buf(e.dictionary):"[object ArrayBuffer]"===Ha.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=La.inflateSetDictionary(this.strm,e.dictionary),r!==ja)))throw new Error(Fn[r])}function Wa(t,e){const r=new Ya(e);if(r.push(t),r.err)throw r.msg||Fn[r.err];return r.result}Ya.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let a,i,o;if(this.ended)return!1;for(i=e===~~e?e:!0===e?Va:za,"[object ArrayBuffer]"===Ha.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=La.inflate(r,i),a===qa&&s&&(a=La.inflateSetDictionary(r,s),a===ja?a=La.inflate(r,i):a===Ka&&(a=qa));r.avail_in>0&&a===Ma&&r.state.wrap>0&&0!==t[r.next_in];)La.inflateReset(r),a=La.inflate(r,i);switch(a){case Za:case Ka:case qa:case Ga:return this.onEnd(a),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(0===r.avail_out||a===Ma))if("string"===this.options.to){let t=Ls.utf8border(r.output,r.next_out),e=r.next_out-t,s=Ls.buf2string(r.output,t);r.next_out=e,r.avail_out=n-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(s)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==ja||0!==o){if(a===Ma)return a=La.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},Ya.prototype.onData=function(t){this.chunks.push(t)},Ya.prototype.onEnd=function(t){t===ja&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Fs.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Xa={Inflate:Ya,inflate:Wa,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Wa(t,e)},ungzip:Wa,constants:Pn};const{Deflate:Ja,deflate:Qa,deflateRaw:ti,gzip:ei}=Js,{Inflate:ri,inflate:ni,inflateRaw:si,ungzip:ai}=Xa;var ii=ei,oi=ai,ci=r(328),li=r(469),ui=Object.defineProperty,di=(t,e)=>{for(var r in e)ui(t,r,{get:e[r],enumerable:!0})},hi={};di(hi,{API_VERSION:()=>$i,BN_FEE_TRANSACTION_VERSION_1:()=>Di,BN_FEE_TRANSACTION_VERSION_2:()=>Fi,BN_TRANSACTION_VERSION_1:()=>Ni,BN_TRANSACTION_VERSION_2:()=>Bi,BaseUrl:()=>Hi,HEX_STR_TRANSACTION_VERSION_1:()=>Oi,HEX_STR_TRANSACTION_VERSION_2:()=>Ri,IS_BROWSER:()=>pi,MASK_250:()=>Ui,MASK_251:()=>Li,NetworkName:()=>zi,RPC_GOERLI_NODES:()=>qi,RPC_MAINNET_NODES:()=>Zi,StarknetChainId:()=>Vi,TEXT_TO_FELT_MAX_LEN:()=>Ti,TransactionHashPrefix:()=>ji,UDC:()=>Mi,ZERO:()=>Pi});var fi={};di(fi,{IS_BROWSER:()=>pi,addHexPrefix:()=>ki,arrayBufferToString:()=>yi,atobUniversal:()=>wi,btoaUniversal:()=>bi,buf2hex:()=>Ei,calcByteLength:()=>xi,padLeft:()=>Ai,pascalToSnake:()=>Ii,removeHexPrefix:()=>vi,sanitizeBytes:()=>Si,sanitizeHex:()=>Ci,stringToArrayBuffer:()=>_i,utf8ToArray:()=>mi});var pi="undefined"!=typeof window,gi="0";function yi(t){return new Uint8Array(t).reduce(((t,e)=>t+String.fromCharCode(e)),"")}function mi(t){return(new TextEncoder).encode(t)}function _i(t){return mi(t)}function wi(t){return m.decode(t)}function bi(t){return m.encode(new Uint8Array(t))}function Ei(t){return t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),"")}function vi(t){return t.replace(/^0x/i,"")}function ki(t){return`0x${vi(t)}`}function Ai(t,e,r=gi){return function(t,e,r,n=gi){const s=e-t.length;let a=t;if(s>0){const e=n.repeat(s);a=r?e+t:t+e}return a}(t,e,!0,r)}function xi(t,e=8){const{length:r}=t,n=r%e;return n?(r-n)/e*e+e:r}function Si(t,e=8,r=gi){return Ai(t,xi(t,e),r)}function Ci(t){return(t=Si(t=vi(t),2))&&(t=ki(t)),t}var Ii=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t,Ti=31,Oi="0x1",Ri="0x2",Ni=1n,Bi=2n,Di=2n**128n+Ni,Fi=2n**128n+Bi,Pi=0n,Ui=2n**250n-1n,Li=2n**251n,$i=Pi,Hi=(t=>(t.SN_MAIN="https://alpha-mainnet.starknet.io",t.SN_GOERLI="https://alpha4.starknet.io",t))(Hi||{}),zi=(t=>(t.SN_MAIN="SN_MAIN",t.SN_GOERLI="SN_GOERLI",t))(zi||{}),Vi=(t=>(t.SN_MAIN="0x534e5f4d41494e",t.SN_GOERLI="0x534e5f474f45524c49",t))(Vi||{}),ji=(t=>(t.DECLARE="0x6465636c617265",t.DEPLOY="0x6465706c6f79",t.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",t.INVOKE="0x696e766f6b65",t.L1_HANDLER="0x6c315f68616e646c6572",t))(ji||{}),Mi={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},qi=["https://starknet-testnet.public.blastapi.io/rpc/v0.5","https://limited-rpc.nethermind.io/goerli-juno/v0_5"],Zi=["https://starknet-mainnet.public.blastapi.io/rpc/v0.5","https://limited-rpc.nethermind.io/mainnet-juno/v0_5"],Ki={};di(Ki,{BlockStatus:()=>no,BlockTag:()=>so,EntryPointType:()=>Ji,Litteral:()=>Xi,RPC:()=>ao,SIMULATION_FLAG:()=>Gi,Sequencer:()=>mo,TransactionExecutionStatus:()=>ro,TransactionFinalityStatus:()=>eo,TransactionStatus:()=>to,TransactionType:()=>Qi,Uint:()=>Wi,ValidateType:()=>Yi});var Gi=(t=>(t.SKIP_VALIDATE="SKIP_VALIDATE",t.SKIP_EXECUTE="SKIP_EXECUTE",t))(Gi||{}),Yi=(t=>(t.DEPLOY="DEPLOY",t.CALL="CALL",t.INVOKE="INVOKE",t))(Yi||{}),Wi=(t=>(t.u8="core::integer::u8",t.u16="core::integer::u16",t.u32="core::integer::u32",t.u64="core::integer::u64",t.u128="core::integer::u128",t.u256="core::integer::u256",t))(Wi||{}),Xi=(t=>(t.ClassHash="core::starknet::class_hash::ClassHash",t.ContractAddress="core::starknet::contract_address::ContractAddress",t))(Xi||{}),Ji=(t=>(t.EXTERNAL="EXTERNAL",t.L1_HANDLER="L1_HANDLER",t.CONSTRUCTOR="CONSTRUCTOR",t))(Ji||{}),Qi=(t=>(t.DECLARE="DECLARE",t.DEPLOY="DEPLOY",t.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",t.INVOKE="INVOKE_FUNCTION",t))(Qi||{}),to=(t=>(t.NOT_RECEIVED="NOT_RECEIVED",t.RECEIVED="RECEIVED",t.ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.ACCEPTED_ON_L1="ACCEPTED_ON_L1",t.REJECTED="REJECTED",t.REVERTED="REVERTED",t))(to||{}),eo=(t=>(t.NOT_RECEIVED="NOT_RECEIVED",t.RECEIVED="RECEIVED",t.ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.ACCEPTED_ON_L1="ACCEPTED_ON_L1",t))(eo||{}),ro=(t=>(t.REJECTED="REJECTED",t.REVERTED="REVERTED",t.SUCCEEDED="SUCCEEDED",t))(ro||{}),no=(t=>(t.PENDING="PENDING",t.ACCEPTED_ON_L1="ACCEPTED_ON_L1",t.ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.REJECTED="REJECTED",t))(no||{}),so=(t=>(t.pending="pending",t.latest="latest",t))(so||{}),ao={};di(ao,{EBlockTag:()=>go,EDataAvailabilityMode:()=>yo,ESimulationFlag:()=>uo,ETransactionExecutionStatus:()=>po,ETransactionFinalityStatus:()=>fo,ETransactionStatus:()=>ho,ETransactionType:()=>lo,Errors:()=>oo,JRPC:()=>io,SPEC:()=>co});var io={},oo={},co={},lo=(t=>(t.DECLARE="DECLARE",t.DEPLOY="DEPLOY",t.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",t.INVOKE="INVOKE",t.L1_HANDLER="L1_HANDLER",t))(lo||{}),uo=(t=>(t.SKIP_VALIDATE="SKIP_VALIDATE",t.SKIP_FEE_CHARGE="SKIP_FEE_CHARGE",t))(uo||{}),ho=(t=>(t.RECEIVED="RECEIVED",t.REJECTED="REJECTED",t.ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.ACCEPTED_ON_L1="ACCEPTED_ON_L1",t))(ho||{}),fo=(t=>(t.ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.ACCEPTED_ON_L1="ACCEPTED_ON_L1",t))(fo||{}),po=(t=>(t.SUCCEEDED="SUCCEEDED",t.REVERTED="REVERTED",t))(po||{}),go=(t=>(t.LATEST="latest",t.PENDING="pending",t))(go||{}),yo=(t=>(t.L1="L1",t.L2="L2",t))(yo||{}),mo={};function _o(t,e){if(!t)throw new Error(e||"Assertion failure")}var wo={};function bo(t){return/^0x[0-9a-f]*$/i.test(t)}function Eo(t){return BigInt(t)}function vo(t){return"bigint"==typeof t}function ko(t){return ki(Eo(t).toString(16))}di(wo,{assertInRange:()=>Io,bigNumberishArrayToDecimalStringArray:()=>To,bigNumberishArrayToHexadecimalStringArray:()=>Oo,cleanHex:()=>Co,getDecimalString:()=>No,getHexString:()=>Bo,getHexStringArray:()=>Do,hexToBytes:()=>Po,hexToDecimalString:()=>So,isBigInt:()=>vo,isHex:()=>bo,isStringWholeNumber:()=>Ro,toBigInt:()=>Eo,toCairoBool:()=>Fo,toHex:()=>ko,toHexString:()=>Ao,toStorageKey:()=>xo});var Ao=ko;function xo(t){return ki(Eo(t).toString(16).padStart(64,"0"))}function So(t){return BigInt(ki(t)).toString(10)}var Co=t=>t.toLowerCase().replace(/^(0x)0+/,"$1");function Io(t,e,r,n=""){const s=""===n?"invalid length":`invalid ${n} length`,a=BigInt(t),i=BigInt(e),o=BigInt(r);_o(a>=i&&a<=o,`Message not signable, ${s}.`)}function To(t){return t.map((t=>Eo(t).toString(10)))}function Oo(t){return t.map((t=>ko(t)))}var Ro=t=>/^\d+$/.test(t);function No(t){if(bo(t))return So(t);if(Ro(t))return t;throw new Error(`${t} need to be hex-string or whole-number-string`)}function Bo(t){if(bo(t))return t;if(Ro(t))return Ao(t);throw new Error(`${t} need to be hex-string or whole-number-string`)}function Do(t){return t.map((t=>Bo(t)))}var Fo=t=>(+t).toString();function Po(t){if(!bo(t))throw new Error(`${t} need to be a hex-string`);let e=vi(t);return e.length%2!=0&&(e=`0${e}`),A(e)}var Uo={};function Lo(t){const e=vi(ko(BigInt(t))),r=e.length%2==0?e:`0${e}`;return ki(He(Po(ki(r))).toString(16))}function $o(t){const e=BigInt(function(t){return ki(He(mi(t)).toString(16))}(t));return e&Ui}function Ho(t){return ko($o(t))}function zo(t){return bo(t)?t:Ro(t)?Ao(t):Ho(t)}di(Uo,{getSelector:()=>zo,getSelectorFromName:()=>Ho,keccakBn:()=>Lo,starknetKeccak:()=>$o});var Vo={};function jo(t){return/^[\x00-\x7F]*$/.test(t)}function Mo(t){return t.length<=Ti}function qo(t){return/^[0-9]*$/i.test(t)}function Zo(t){return"string"==typeof t&&!bo(t)&&!Ro(t)}di(Vo,{decodeShortString:()=>Xo,encodeShortString:()=>Wo,isASCII:()=>jo,isDecimalString:()=>qo,isLongText:()=>Go,isShortString:()=>Mo,isShortText:()=>Ko,isText:()=>Zo,splitLongString:()=>Yo});var Ko=t=>Zo(t)&&Mo(t),Go=t=>Zo(t)&&!Mo(t);function Yo(t){const e=RegExp(`[^]{1,${Ti}}`,"g");return t.match(e)||[]}function Wo(t){if(!jo(t))throw new Error(`${t} is not an ASCII string`);if(!Mo(t))throw new Error(`${t} is too long`);return ki(t.replace(/./g,(t=>t.charCodeAt(0).toString(16))))}function Xo(t){if(!jo(t))throw new Error(`${t} is not an ASCII string`);if(bo(t))return vi(t).replace(/.{2}/g,(t=>String.fromCharCode(parseInt(t,16))));if(qo(t))return Xo("0X".concat(BigInt(t).toString(16)));throw new Error(`${t} is not Hex or decimal`)}var Jo={};di(Jo,{felt:()=>Sc,getAbiContractVersion:()=>kc,getArrayType:()=>Ec,isCairo1Abi:()=>vc,isCairo1Type:()=>bc,isLen:()=>ac,isTypeArray:()=>oc,isTypeBool:()=>mc,isTypeContractAddress:()=>_c,isTypeEnum:()=>dc,isTypeEthAddress:()=>wc,isTypeFelt:()=>ic,isTypeLitteral:()=>gc,isTypeNamedTuple:()=>lc,isTypeOption:()=>hc,isTypeResult:()=>fc,isTypeStruct:()=>uc,isTypeTuple:()=>cc,isTypeUint:()=>pc,isTypeUint256:()=>yc,tuple:()=>xc,uint256:()=>Ac});var Qo={};di(Qo,{UINT_128_MAX:()=>tc,UINT_256_MAX:()=>ec,bnToUint256:()=>sc,isUint256:()=>nc,uint256ToBN:()=>rc});var tc=(1n<<128n)-1n,ec=(1n<<256n)-1n;function rc(t){return(Eo(t.high)<<128n)+Eo(t.low)}function nc(t){return Eo(t)<=ec}function sc(t){const e=Eo(t);if(!nc(e))throw new Error("Number is too large");return{low:ki((e&tc).toString(16)),high:ki((e>>128n).toString(16))}}var ac=t=>/_len$/.test(t),ic=t=>"felt"===t||"core::felt252"===t,oc=t=>/\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),cc=t=>/^\(.*\)$/i.test(t),lc=t=>/\(.*\)/i.test(t)&&t.includes(":"),uc=(t,e)=>t in e,dc=(t,e)=>t in e,hc=t=>t.startsWith("core::option::Option::"),fc=t=>t.startsWith("core::result::Result::"),pc=t=>Object.values(Wi).includes(t),gc=t=>Object.values(Xi).includes(t),yc=t=>"core::integer::u256"===t,mc=t=>"core::bool"===t,_c=t=>"core::starknet::contract_address::ContractAddress"===t,wc=t=>"core::starknet::eth_address::EthAddress"===t,bc=t=>t.includes("::"),Ec=t=>bc(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function vc(t){const{cairo:e}=kc(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function kc(t){if(t.find((t=>"interface"===t.type)))return{cairo:"1",compiler:"2"};const e=t.find((t=>"function"===t.type&&(t.inputs.length||t.outputs.length)));if(!e)return{cairo:void 0,compiler:void 0};const r=e.inputs.length?e.inputs:e.outputs;return bc(r[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Ac=t=>{const e=BigInt(t);if(!nc(e))throw new Error("Number is too large");return{low:(e&tc).toString(10),high:(e>>128n).toString(10)}},xc=(...t)=>({...t});function Sc(t){if(vo(t)||"number"==typeof t&&Number.isInteger(t))return t.toString();if(Zo(t)){if(!Mo(t))throw new Error(`${t} is a long string > 31 chars, felt can store short strings, split it to array of short strings`);const e=Wo(t);return BigInt(e).toString()}if("string"==typeof t&&bo(t))return BigInt(t).toString();if("string"==typeof t&&Ro(t))return t;if("boolean"==typeof t)return""+ +t;throw new Error(`${t} can't be computed by felt()`)}var Cc=class{constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have a least 1 variant");if(1!==e.filter((t=>void 0!==t)).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){const t=Object.entries(this.variant).find((t=>void 0!==t[1]));if(void 0!==t)return t[1]}activeVariant(){const t=Object.entries(this.variant).find((t=>void 0!==t[1]));return void 0===t?"":t[0]}},Ic=(t=>(t[t.Some=0]="Some",t[t.None=1]="None",t))(Ic||{}),Tc=class{constructor(t,e){if(!(t in Ic))throw new Error("Wrong variant : should be CairoOptionVariant.Some or .None.");if(0===t){if(void 0===e)throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){if(!this.None)return this.Some}isSome(){return!(void 0===this.Some)}isNone(){return!0===this.None}},Oc=(t=>(t[t.Ok=0]="Ok",t[t.Err=1]="Err",t))(Oc||{}),Rc=class{constructor(t,e){if(!(t in Oc))throw new Error("Wrong variant : should be CairoResultVariant.Ok or .Err.");0===t?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(void 0!==this.Ok)return this.Ok;if(void 0!==this.Err)return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!(void 0===this.Ok)}isErr(){return!(void 0===this.Err)}},Nc=(t,e,r)=>{if(!vo(t[r]))throw new Error(`Data and formatter mismatch on ${r}:${e[r]}, expected response data ${r}:${t[r]} to be BN instead it is ${typeof t[r]}`)};function Bc(t,e,r){return Object.entries(t).reduce(((n,[s,a])=>{const i=r??e[s];if(!(s in e)&&!r)return n[s]=a,n;if("string"===i){if(Array.isArray(t[s])){const e=Bc(t[s],t[s].map((t=>i)));return n[s]=Object.values(e).join(""),n}return Nc(t,e,s),n[s]=Xo(a),n}if("number"===i)return Nc(t,e,s),n[s]=Number(a),n;if("function"==typeof i)return n[s]=i(a),n;if(Array.isArray(i)){const e=Bc(t[s],i,i[0]);return n[s]=Object.values(e),n}return"object"==typeof i?(n[s]=Bc(t[s],i),n):(((t,e,r)=>{throw new Error(`Unhandled formatter type on ${r}:${e[r]} for data ${r}:${t[r]}`)})(t,e,s),n)}),{})}var Dc=class{constructor(t){this.abi=t}methodInputsLength(t){return t.inputs.reduce(((t,e)=>ac(e.name)?t:t+1),0)}getMethod(t){return this.abi.find((e=>e.name===t))}getLegacyFormat(){return this.abi}},Fc=class{constructor(t){this.abi=t}methodInputsLength(t){return t.inputs.length}getMethod(t){return this.abi.find((t=>"interface"===t.type)).items.find((e=>e.name===t))}getLegacyFormat(){return this.abi.flatMap((t=>"interface"===t.type?t.items:t))}};function Pc(t){const e=function(t){return t.find((t=>"interface"===t.type))?2:vc(t)?1:0}(t);if(0===e||1===e)return new Dc(t);if(2===e)return new Fc(t);throw Error(`Unsupported ABI version ${e}`)}function Uc(t,e,r){return"constructor"===t&&!r&&!e.length}function Lc(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let r="",n=0;for(;n<t.length;){if("("===t[n]){let s=1;const a=n;for(n++;s;)")"===t[n]&&s--,"("===t[n]&&s++,n++;e.push(t.substring(a,n)),r+=" ",n--}else r+=t[n];n++}return{subTuple:e,result:r}}function $c(t){return bc(t)?function(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:r,result:n}=Lc(e);return n.split(",").map((t=>r.length?t.replace(" ",r.shift()):t))}(t):function(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:r,result:n}=Lc(e);let s=n.split(",").map((t=>r.length?t.replace(" ",r.shift()):t));return lc(t)&&(s=s.reduce(((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e))),[])),s}(t)}function Hc(t,e){if(!0===yc(t)){const t=Ac(e);return[Sc(t.low),Sc(t.high)]}return Sc(e)}function zc(t){if("object"==typeof t){const{low:e,high:r}=t;return[Sc(e),Sc(r)]}const e=Ac(t);return[Sc(e.low),Sc(e.high)]}function Vc(t,e,r,n){if(void 0===t)throw Error(`Missing parameter for type ${e}`);if(Array.isArray(t)){const s=[];s.push(Sc(t.length));const a=Ec(e);return t.reduce(((t,e)=>t.concat(Vc(e,a,r,n))),s)}if(r[e]&&r[e].members.length){if(yc(e))return zc(t);if("core::starknet::eth_address::EthAddress"===e)return Hc(e,t);const{members:s}=r[e],a=t;return s.reduce(((t,e)=>t.concat(Vc(a[e.name],e.type,r,n))),[])}if(cc(e)){const s=function(t,e){const r=$c(e),n=Object.values(t);if(n.length!==r.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${n} \n      expected: ${r}`);return r.map(((t,e)=>({element:n[e],type:t.type??t})))}(t,e);return s.reduce(((t,e)=>{const s=Vc(e.element,e.type,r,n);return t.concat(s)}),[])}if(yc(e))return zc(t);if(dc(e,n)){const{variants:s}=n[e];if(hc(e)){const e=t;if(e.isSome()){const t=s.find((t=>"Some"===t.name));if(void 0===t)throw Error("Error in abi : Option has no 'Some' variant.");const a=t.type;if("()"===a)return(0).toString();const i=Vc(e.unwrap(),a,r,n);return Array.isArray(i)?[(0).toString(),...i]:[(0).toString(),i]}return 1..toString()}if(fc(e)){const e=t;if(e.isOk()){const t=s.find((t=>"Ok"===t.name));if(void 0===t)throw Error("Error in abi : Result has no 'Ok' variant.");const a=t.type;if("()"===a)return(0).toString();const i=Vc(e.unwrap(),a,r,n);return Array.isArray(i)?[(0).toString(),...i]:[(0).toString(),i]}const a=s.find((t=>"Err"===t.name));if(void 0===a)throw Error("Error in abi : Result has no 'Err' variant.");const i=a.type;if("()"===i)return 1..toString();const o=Vc(e.unwrap(),i,r,n);return Array.isArray(o)?[1..toString(),...o]:[1..toString(),o]}const a=t,i=a.activeVariant(),o=s.find((t=>t.name===i));if(void 0===o)throw Error(`Not find in abi : Enum has no '${i}' variant.`);const c=o.type,l=s.findIndex((t=>t.name===i));if("()"===c)return l.toString();const u=Vc(a.unwrap(),c,r,n);return Array.isArray(u)?[l.toString(),...u]:[l.toString(),u]}if("object"==typeof t)throw Error(`Parameter ${t} do not align with abi parameter ${e}`);return Hc(e,t)}function jc(t,e){let r;switch(!0){case mc(t):return r=e.next().value,Boolean(BigInt(r));case yc(t):return rc({low:e.next().value,high:e.next().value});default:return r=e.next().value,BigInt(r)}}function Mc(t,e,r,n){if("()"===e.type)return{};if(yc(e.type))return rc({low:t.next().value,high:t.next().value});if(oc(e.type)){const s=[],a={name:"",type:Ec(e.type)},i=BigInt(t.next().value);for(;s.length<i;)s.push(Mc(t,a,r,n));return s}if(r&&e.type in r&&r[e.type])return"core::starknet::eth_address::EthAddress"===e.type?jc(e.type,t):r[e.type].members.reduce(((e,s)=>(e[s.name]=Mc(t,s,r,n),e)),{});if(n&&e.type in n&&n[e.type]){const s=Number(t.next().value),a=n[e.type].variants.reduce(((e,a,i)=>i===s?(e[a.name]=Mc(t,{name:"",type:a.type},r,n),e):(e[a.name]=void 0,e)),{});if(e.type.startsWith("core::option::Option")){const t=0===s?a.Some:void 0;return new Tc(s,t)}if(e.type.startsWith("core::result::Result")){let t;return t=0===s?a.Ok:a.Err,new Rc(s,t)}return new Cc(a)}if(cc(e.type))return $c(e.type).reduce(((e,s,a)=>{const i=s?.name?s.name:a,o={name:i,type:s?.type?s.type:s};return e[i]=Mc(t,o,r,n),e}),{});if(oc(e.type)){const s=[],a={name:"",type:Ec(e.type)},i=BigInt(t.next().value);for(;s.length<i;)s.push(Mc(t,a,r,n));return s}return jc(e.type,t)}function qc(t,e,r,n,s){const{name:a,type:i}=e;let o;switch(!0){case ac(a):return o=t.next().value,BigInt(o);case r&&i in r||cc(i):case n&&dc(i,n):return Mc(t,e,r,n);case oc(i):if(bc(i))return Mc(t,e,r,n);const c=[];if(s&&s[`${a}_len`]){const i=s[`${a}_len`];for(;c.length<i;)c.push(Mc(t,{name:a,type:e.type.replace("*","")},r,n))}return c;default:return jc(i,t)}}var Zc=(t,e)=>{if(_o("string"==typeof t||"number"==typeof t||"bigint"==typeof t,`Validate: arg ${e.name} should be a felt typed as (String, Number or BigInt)`),"string"==typeof t&&!bo(t))return;const r=BigInt(t.toString(10));_o(r>=0n&&r<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)},Kc=(t,e)=>{"number"==typeof t&&_o(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is to large to be typed as Number use (BigInt or String)"),_o("string"==typeof t||"number"==typeof t||"bigint"==typeof t||"object"==typeof t&&"low"in t&&"high"in t,`Validate: arg ${e.name} of cairo type ${e.type} should be type (String, Number or BigInt), but is ${typeof t} ${t}.`);const r="object"==typeof t?rc(t):Eo(t);switch(e.type){case"core::integer::u8":_o(r>=0n&&r<=255n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0 - 255]`);break;case"core::integer::u16":_o(r>=0n&&r<=65535n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 65535]`);break;case"core::integer::u32":_o(r>=0n&&r<=4294967295n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 4294967295]`);break;case"core::integer::u64":_o(r>=0n&&r<=2n**64n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^64-1]`);break;case"core::integer::u128":_o(r>=0n&&r<=2n**128n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^128-1]`);break;case"core::integer::u256":_o(r>=0n&&r<=2n**256n-1n,`Validate: arg ${e.name} is ${e.type} 0 - 2^256-1`);break;case"core::starknet::class_hash::ClassHash":case"core::starknet::contract_address::ContractAddress":_o(r>=0n&&r<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)}},Gc=(t,e)=>{_o("boolean"==typeof t,`Validate: arg ${e.name} of cairo type ${e.type} should be type (Boolean)`)},Yc=(t,e,r)=>{if("core::integer::u256"!==e.type)if("core::starknet::eth_address::EthAddress"!==e.type)_o("object"==typeof t&&!Array.isArray(t),`Validate: arg ${e.name} is cairo type struct (${e.type}), and should be defined as js object (not array)`),r[e.type].members.forEach((({name:r})=>{_o(Object.keys(t).includes(r),`Validate: arg ${e.name} should have a property ${r}`)}));else{_o("object"!=typeof t,`EthAdress type is waiting a BigNumberish. Got ${t}`);const r=BigInt(t.toString(10));_o(r>=0n&&r<=2n**160n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^160-1]`)}else Kc(t,e)},Wc=(t,e)=>{_o("object"==typeof t&&!Array.isArray(t),`Validate: arg ${e.name} is cairo type Enum (${e.type}), and should be defined as js object (not array)`);const r=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),n=[...Object.getOwnPropertyNames(t),...r];if(!(hc(e.type)&&n.includes("isSome")&&n.includes("isNone")||fc(e.type)&&n.includes("isOk")&&n.includes("isErr")||n.includes("variant")&&n.includes("activeVariant")))throw new Error(`Validate Enum: argument ${e.name}, type ${e.type}, value received ${t}, is not an Enum.`)},Xc=(t,e)=>{_o("object"==typeof t&&!Array.isArray(t),`Validate: arg ${e.name} should be a tuple (defined as object)`)},Jc=(t,e,r,n)=>{const s=Ec(e.type);if(!ic(s)||!Go(t))switch(_o(Array.isArray(t),`Validate: arg ${e.name} should be an Array`),!0){case ic(s):t.forEach((t=>Zc(t,e)));break;case cc(s):t.forEach((t=>Xc(t,{name:e.name,type:s})));break;case oc(s):t.forEach((t=>Jc(t,{name:"",type:s},r,n)));break;case uc(s,r):t.forEach((t=>Yc(t,{name:e.name,type:s},r)));break;case dc(s,n):t.forEach((t=>Wc(t,{name:e.name,type:s})));break;case pc(s)||gc(s):t.forEach((t=>Kc(t,e)));break;case mc(s):t.forEach((t=>Gc(t,e)));break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value ${t}`)}};function Qc(t,e,r,n){t.inputs.reduce(((t,s)=>{const a=e[t];switch(!0){case ac(s.name):return t;case ic(s.type):Zc(a,s);break;case pc(s.type)||gc(s.type):Kc(a,s);break;case mc(s.type):Gc(a,s);break;case oc(s.type):Jc(a,s,r,n);break;case uc(s.type,r):Yc(a,s,r);break;case dc(s.type,n):Wc(a,s);break;case cc(s.type):Xc(a,s);break;default:throw new Error(`Validate Unhandled: argument ${s.name}, type ${s.type}, value ${a}`)}return t+1}),0)}var tl=class{constructor(t){this.structs=tl.getAbiStruct(t),this.enums=tl.getAbiEnum(t),this.parser=Pc(t),this.abi=this.parser.getLegacyFormat()}validate(t,e,r=[]){"DEPLOY"!==t&&_o(this.abi.filter((e=>{if("function"!==e.type)return!1;const r="view"===e.stateMutability||"view"===e.state_mutability;return"INVOKE"===t?!r:r})).map((t=>t.name)).includes(e),("INVOKE"===t?"invocable":"viewable")+" method not found in abi");const n=this.abi.find((r=>"DEPLOY"===t?r.name===e&&"constructor"===r.type:r.name===e&&"function"===r.type));if(Uc(e,r,n))return;const s=this.parser.methodInputsLength(n);if(r.length!==s)throw Error(`Invalid number of arguments, expected ${s} arguments, but got ${r.length}`);Qc(n,r,this.structs,this.enums)}compile(t,e){const r=this.abi.find((e=>e.name===t));if(Uc(t,e,r))return[];let n;if(Array.isArray(e))n=e;else{const t=function(t,e,r,n){const s=(t,e)=>{if(oc(e))return function(t,e){const r=Ec(e);return"string"==typeof t?t:t.map((t=>s(t,r)))}(t,e);if(dc(e,n)){const r=n[e];return i(t,r)}if(cc(e))return function(t,e){const r=$c(e).reduce(((e,r,n)=>{const a=Object.keys(t),i=r?.type?r.type:r;return o=s(t[a[n]],i),Object.defineProperty(e,n.toString(),{enumerable:!0,value:o??t[a[n]]}),e;var o}),{});return r}(t,e);if(wc(e))return t;if(yc(e)){const r=t;if("object"!=typeof r)return r;if(!("low"in r)||!("high"in r))throw Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:r.low,high:r.high}}if(uc(e,r)){const n=r[e].members;return a(t,n)}return t},a=(t,e)=>e.reduce(((e,r)=>{if("undefined"===t[r.name]&&(bc(r.type)||!ac(r.name)))throw Error(`Your object needs a property with key : ${r.name} .`);var n;return n=s(t[r.name],r.type),Object.defineProperty(e,r.name,{enumerable:!0,value:n??t[r.name]}),e}),{}),i=(t,e)=>{if(fc(e.name)){const r=t,n=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),a=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return r.isOk()?new Rc(0,s(t.unwrap(),n)):new Rc(1,s(t.unwrap(),a))}if(hc(e.name)){const r=t,n=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return r.isSome()?new Tc(0,s(r.unwrap(),n)):new Tc(1,{})}const r=t,n=Object.entries(r.variant).map((t=>{if(void 0===t[1])return t;const n=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===n?t:[t[0],s(r.unwrap(),n)]}));return new Cc(Object.fromEntries(n))};return e.reduce(((e,r)=>{return ac(r.name)&&!bc(r.type)||(n=s(t[r.name],r.type),Object.defineProperty(e,r.name,{enumerable:!0,value:n})),e;var n}),{})}(e,r.inputs,this.structs,this.enums);n=Object.values(t),Qc(r,n,this.structs,this.enums)}const s=n[Symbol.iterator](),a=r.inputs.reduce(((t,e)=>ac(e.name)&&!bc(e.type)?t:t.concat(function(t,e,r,n){const{name:s,type:a}=e;let{value:i}=t.next();switch(!0){case oc(a):if(!Array.isArray(i)&&!Zo(i))throw Error(`ABI expected parameter ${s} to be array or long string, got ${i}`);return"string"==typeof i&&(i=Yo(i)),Vc(i,e.type,r,n);case"core::starknet::eth_address::EthAddress"===a:return Hc(a,i);case uc(a,r)||cc(a)||yc(a):case dc(a,n):return Vc(i,a,r,n);default:return Hc(a,i)}}(s,e,this.structs,this.enums))),[]);return Object.defineProperty(a,"__compiled__",{enumerable:!1,writable:!1,value:!0}),a}static compile(t){const e=t=>{const e=(t,r=".")=>{const n=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(n).flatMap((([t,s])=>{let a=s;Go(a)&&(a=Yo(a)),"entrypoint"===t&&(a=Ho(a));const i=Array.isArray(n)&&"0"===t?"$$len":t;if(vo(a))return[[`${r}${i}`,Sc(a)]];if(Object(a)===a){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(a)),n=[...Object.getOwnPropertyNames(a),...t];if(n.includes("isSome")&&n.includes("isNone")){const t=a,n=t.isSome()?0:1;return t.isSome()?e({0:n,1:t.unwrap()},`${r}${i}.`):[[`${r}${i}`,Sc(n)]]}if(n.includes("isOk")&&n.includes("isErr")){const t=a,n=t.isOk()?0:1;return e({0:n,1:t.unwrap()},`${r}${i}.`)}if(n.includes("variant")&&n.includes("activeVariant")){const t=a,n=t.activeVariant(),s=Object.keys(t.variant).findIndex((t=>t===n));return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[`${r}${i}`,Sc(s)]]:e({0:s,1:t.unwrap()},`${r}${i}.`)}return e(a,`${r}${i}.`)}return[[`${r}${i}`,Sc(a)]]}))};return Object.fromEntries(e(t))};let r;if(Array.isArray(t)){const n=e({...t});r=Object.values(n)}else{const n=e(t);r=Object.values(n)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(t,e){const{outputs:r}=this.abi.find((e=>e.name===t)),n=e.flat()[Symbol.iterator](),s=r.flat().reduce(((t,e,r)=>{const s=e.name??r;return t[s]=qc(n,e,this.structs,this.enums,t),t[s]&&t[`${s}_len`]&&delete t[`${s}_len`],t}),{});return 1===Object.keys(s).length&&0 in s?s[0]:s}format(t,e,r){return Bc(this.parse(t,e),r)}static getAbiStruct(t){return t.filter((t=>"struct"===t.type)).reduce(((t,e)=>({...t,[e.name]:e})),{})}static getAbiEnum(t){const e=t.filter((t=>"enum"===t.type)).reduce(((t,e)=>({...t,[e.name]:e})),{});return delete e["core::bool"],e}static toCalldata(t=[]){return tl.compile(t)}static toHex(t=[]){return tl.compile(t).map((t=>ko(t)))}},el={};di(el,{calculateContractAddressFromHash:()=>bl,calculateDeclareTransactionHash:()=>ml,calculateDeployAccountTransactionHash:()=>_l,calculateDeployTransactionHash:()=>yl,calculateTransactionHash:()=>wl,calculateTransactionHashCommon:()=>gl,computeCompiledClassHash:()=>Sl,computeContractClassHash:()=>Tl,computeHashOnElements:()=>pl,computeLegacyContractClassHash:()=>Al,computeSierraContractClassHash:()=>Il,default:()=>kl,feeTransactionVersion:()=>dl,feeTransactionVersion_2:()=>hl,formatSpaces:()=>vl,getSelector:()=>zo,getSelectorFromName:()=>Ho,getVersionsByType:()=>fl,keccakBn:()=>Lo,poseidon:()=>e,starknetKeccak:()=>$o,transactionVersion:()=>ll,transactionVersion_2:()=>ul});var rl={};di(rl,{starkCurve:()=>s,weierstrass:()=>n});var nl={};di(nl,{parse:()=>al,parseAlwaysAsBig:()=>il,stringify:()=>ol,stringifyAlwaysAsBig:()=>cl});var sl=t=>{if(!Qe(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},al=t=>br(String(t),void 0,sl),il=t=>br(String(t),void 0,pr),ol=(t,e,r,n)=>Xr(t,e,r,n),cl=ol,ll=Ni,ul=Bi,dl=Di,hl=Fi;function fl(t){return"fee"===t?{v1:dl,v2:hl}:{v1:ll,v2:ul}}function pl(t){return[...t,t.length].reduce(((t,e)=>Ue(Eo(t),Eo(e))),0).toString()}function gl(t,e,r,n,s,a,i,o=[]){const c=pl(s);return pl([t,e,r,n,c,a,i,...o])}function yl(t,e,r,n,s="constructor"){return gl("0x6465706c6f79",r,t,Ho(s),e,0,n)}function ml(t,e,r,n,s,a,i){return gl("0x6465636c617265",r,e,0,[t],n,s,[a,...i?[i]:[]])}function _l(t,e,r,n,s,a,i,o){return gl("0x6465706c6f795f6163636f756e74",s,t,0,[e,n,...r],a,i,[o])}function wl(t,e,r,n,s,a){return gl("0x696e766f6b65",e,t,0,r,n,s,[a])}function bl(t,e,r,n){const s=pl(tl.compile(r));return pl([Sc("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,t,e,s])}function El(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function vl(t){let e=!1;const r=[];for(const n of t)'"'===n&&0==(r.length>0&&"\\"===r.slice(-1)[0])&&(e=!e),e?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function kl(t){const{abi:e,program:r}=t,n=vl(ol({abi:e,program:r},El));return ki(He(mi(n)).toString(16))}function Al(t){const e="string"==typeof t?al(t):t,r=ko($i),n=pl(e.entry_points_by_type.EXTERNAL.flatMap((t=>[t.selector,t.offset]))),s=pl(e.entry_points_by_type.L1_HANDLER.flatMap((t=>[t.selector,t.offset]))),a=pl(e.entry_points_by_type.CONSTRUCTOR.flatMap((t=>[t.selector,t.offset]))),i=pl(e.program.builtins.map((t=>Wo(t)))),o=kl(e),c=pl(e.program.data);return pl([r,n,s,a,i,o,c])}function xl(t){const e=t.flatMap((t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,Je(e.flatMap((t=>BigInt(Wo(t))))))];var e}));return Je(e)}function Sl(t){const e=BigInt(Wo("COMPILED_CLASS_V1")),r=xl(t.entry_points_by_type.EXTERNAL),n=xl(t.entry_points_by_type.L1_HANDLER),s=xl(t.entry_points_by_type.CONSTRUCTOR),a=Je(t.bytecode.map((t=>BigInt(t))));return ko(Je([e,r,n,s,a]))}function Cl(t){return Je(t.flatMap((t=>[BigInt(t.selector),BigInt(t.function_idx)])))}function Il(t){const e=BigInt(Wo("CONTRACT_CLASS_V0.1.0")),r=Cl(t.entry_points_by_type.EXTERNAL),n=Cl(t.entry_points_by_type.L1_HANDLER),s=Cl(t.entry_points_by_type.CONSTRUCTOR),a=function(t){const e=vl(ol(t.abi,null));return BigInt(ki(He(mi(e)).toString(16)))}(t),i=Je(t.sierra_program.map((t=>BigInt(t))));return ko(Je([e,r,n,s,a,i]))}function Tl(t){const e="string"==typeof t?al(t):t;return"sierra_program"in e?Il(e):Al(e)}var Ol={};function Rl(t){const e="string"==typeof t?t:ol(t);return bi(ii(e))}function Nl(t){if(Array.isArray(t))return t;const e=yi(oi(wi(t)));return al(e)}function Bl(){return Ie(Ae.randomPrivateKey())}function Dl(t){return ki(t).toLowerCase()}function Fl(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map((t=>ko(t)));try{const{r:e,s:r}=t;return[ko(e),ko(r)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Pl(t){return To(Fl(t))}function Ul(t){return Oo(Fl(t))}function Ll(t,e=.5){const r=Math.round(100*(1+e));return Eo(t)*Eo(r)/100n}function $l(t){return"sierra_program"in("string"==typeof t?al(t):t)}function Hl(t){const e={...t};if($l(t.contract)&&(!t.compiledClassHash&&t.casm&&(e.compiledClassHash=Sl(t.casm)),!e.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(e.classHash=t.classHash??Tl(t.contract),!e.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return e}function zl(t){if($l(t))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");const e=t;return{...e,program:Nl(e.program)}}di(Ol,{compressProgram:()=>Rl,decompressProgram:()=>Nl,estimatedFeeToMaxFee:()=>Ll,formatSignature:()=>Fl,makeAddress:()=>Dl,randomAddress:()=>Bl,signatureToDecimalArray:()=>Pl,signatureToHexArray:()=>Ul});var Vl="undefined"!=typeof window&&window.fetch||"undefined"!=typeof global&&global.fetch||ci,jl={};function Ml(t){return new Promise((e=>{setTimeout(e,t)}))}function ql(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=vl(ol(t.abi)),e.sierra_program=vl(ol(t.sierra_program)),e.sierra_program=Rl(e.sierra_program),e}function Zl(t){const e="string"==typeof t?al(t):t;return $l(t)?ql(e):{...e,..."program"in e&&{program:Rl(e.program)}}}di(jl,{createSierraContractClass:()=>ql,parseContract:()=>Zl,wait:()=>Ml});var Kl=class{parseGetBlockResponse(t){return{timestamp:t.timestamp,block_hash:"block_hash"in t?t.block_hash:"",block_number:"block_number"in t?t.block_number:-1,new_root:"new_root"in t?t.new_root:"",parent_hash:t.parent_hash,status:"status"in t?t.status:"PENDING",transactions:t.transactions}}parseGetTransactionResponse(t){return{calldata:"calldata"in t?t.calldata:[],contract_address:"contract_address"in t?t.contract_address:"",sender_address:"sender_address"in t?t.sender_address:"",max_fee:"max_fee"in t?t.max_fee:"",nonce:"nonce"in t?t.nonce:"",signature:"signature"in t?t.signature:[],transaction_hash:t.transaction_hash,version:t.version}}parseFeeEstimateResponse(t){return{overall_fee:Eo(t[0].overall_fee),gas_consumed:Eo(t[0].gas_consumed),gas_price:Eo(t[0].gas_price)}}parseFeeEstimateBulkResponse(t){return t.map((t=>({overall_fee:Eo(t.overall_fee),gas_consumed:Eo(t.gas_consumed),gas_price:Eo(t.gas_price)})))}parseCallContractResponse(t){return{result:t}}parseSimulateTransactionResponse(t){return t.map((t=>({...t,suggestedMaxFee:Ll(BigInt(t.fee_estimation.overall_fee))})))}parseContractClassResponse(t){return{...t,abi:"string"==typeof t.abi?JSON.parse(t.abi):t.abi}}};function Gl(t,e=t.constructor){const{captureStackTrace:r}=Error;r&&r(t,e)}function Yl(t,e){const{setPrototypeOf:r}=Object;r?r(t,e):t.__proto__=e}var Wl=class extends Error{constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),Yl(this,new.target.prototype),Gl(this)}},Xl=class extends Wl{},Jl=class extends Xl{constructor(t,e){super(t),this.errorCode=e}},Ql=class extends Xl{constructor(t,e){super(t),this.errorCode=e}},tu={};di(tu,{StarknetIdContract:()=>uu,getStarknetIdContract:()=>du,useDecoded:()=>cu,useEncoded:()=>lu});var eu="abcdefghijklmnopqrstuvwxyz0123456789-",ru=BigInt(eu.length+1),nu="",su=BigInt(eu.length),au=BigInt(nu.length),iu=BigInt(nu.length+1);function ou(t){let e=0;for(;t.endsWith(nu[nu.length-1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function cu(t){let e="";return t.forEach((t=>{for(;t!==Pi;){const r=t%ru;if(t/=ru,r===BigInt(eu.length)){const r=t/iu;if(r===Pi){const n=t%iu;t=r,e+=n===Pi?eu[0]:nu[Number(n)-1]}else e+=nu[Number(t%au)],t/=au}else e+=eu[Number(r)]}const[r,n]=ou(e);n&&(e=r+(n%2==0?nu[nu.length-1].repeat(n/2-1)+nu[0]+eu[1]:nu[nu.length-1].repeat((n-1)/2+1))),e+="."})),e?e.concat("stark"):e}function lu(t){let e=BigInt(0),r=BigInt(1);if(t.endsWith(nu[0]+eu[1])){const[e,r]=ou(t.substring(0,t.length-2));t=e+nu[nu.length-1].repeat(2*(r+1))}else{const[e,r]=ou(t);r&&(t=e+nu[nu.length-1].repeat(1+2*(r-1)))}for(let n=0;n<t.length;n+=1){const s=t[n],a=eu.indexOf(s),i=BigInt(eu.indexOf(s));if(-1!==a)n===t.length-1&&t[n]===eu[0]?(e+=r*su,r*=ru,r*=ru):(e+=r*i,r*=ru);else if(-1!==nu.indexOf(s)){e+=r*su,r*=ru;const a=(n===t.length-1?1:0)+nu.indexOf(s);e+=r*BigInt(a),r*=au}}return e}var uu=(t=>(t.MAINNET="0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",t.TESTNET="0x3bab268e932d2cecd1946f100ae67ce3dff9fd234119ea2f6da57d16d29fce",t))(uu||{});function du(t){switch(t){case"0x534e5f4d41494e":return"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678";case"0x534e5f474f45524c49":return"0x3bab268e932d2cecd1946f100ae67ce3dff9fd234119ea2f6da57d16d29fce";default:throw new Error("Starknet.id is not yet deployed on this network")}}async function hu(t,e,r){const n=await t.getChainId(),s=r??du(n);try{const r=cu((await t.callContract({contractAddress:s,entrypoint:"address_to_domain",calldata:tl.compile({address:e})})).result.map((t=>BigInt(t))).slice(1));if(!r)throw Error("Starkname not found");return r}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}async function fu(t,e,r){const n=await t.getChainId(),s=r??du(n);try{return(await t.callContract({contractAddress:s,entrypoint:"domain_to_address",calldata:tl.compile({domain:[lu(e.replace(".stark","")).toString(10)]})})).result[0]}catch{throw Error("Could not get address from stark name")}}var pu=Object.values(so),gu=class{constructor(t){this.hash=null,this.number=null,this.tag=null,this.valueOf=()=>this.number,this.toString=()=>this.hash,this.setIdentifier(t)}setIdentifier(t){"string"==typeof t&&bo(t)?this.hash=t:"bigint"==typeof t?this.hash=ko(t):"number"==typeof t?this.number=t:"string"==typeof t&&pu.includes(t)?this.tag=t:this.tag="pending"}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}get sequencerIdentifier(){return null!==this.hash?{blockHash:this.hash}:{blockNumber:this.number??this.tag}}},yu=(t,e=!1)=>{e||console.warn("Using default public node url, please provide nodeUrl in provider options!");const r="SN_MAIN"===t?Zi:qi;return r[Math.floor(Math.random()*r.length)]},mu={"Content-Type":"application/json"},_u=class{constructor(t){this.responseParser=new Kl,this.getBlockHashAndNumber=this.getBlockLatestAccepted,this.getStateUpdate=this.getBlockStateUpdate,this.traceBlockTransactions=this.getBlockTransactionsTraces,this.getTransactionCount=this.getBlockTransactionCount,this.traceTransaction=this.getTransactionTrace,this.getSimulateTransaction=this.simulateTransaction;const{nodeUrl:e,retries:r,headers:n,blockIdentifier:s,chainId:a}=t||{};Object.values(zi).includes(e)?this.nodeUrl=yu(e,t?.default):this.nodeUrl=e||yu(void 0,t?.default),this.retries=r||200,this.headers={...mu,...n},this.blockIdentifier=s||"pending",this.chainId=a}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return Vl(this.nodeUrl,{method:"POST",body:ol(n),headers:this.headers})}errorHandler(t,e,r,n){if(r){const{code:n,message:s,data:a}=r;throw new Xl(`RPC: ${t} with params ${ol(e)}\n ${n}: ${s}: ${ol(a)}`)}if(n instanceof Xl)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{const r=await this.fetch(t,e),{error:n,result:s}=await r.json();return this.errorHandler(t,e,n),s}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}async getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async getNonceForAddress(t,e=this.blockIdentifier){const r=ko(t),n=new gu(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}async getBlock(t=this.blockIdentifier){return this.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}async getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}async getBlockWithTxHashes(t=this.blockIdentifier){const e=new gu(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}async getBlockWithTxs(t=this.blockIdentifier){const e=new gu(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}async getBlockStateUpdate(t=this.blockIdentifier){const e=new gu(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}async getBlockTransactionsTraces(t=this.blockIdentifier){const e=new gu(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}async getBlockTransactionCount(t=this.blockIdentifier){const e=new gu(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}async getPendingTransactions(){const{transactions:t}=await this.getBlock("pending");return Promise.all(t.map((t=>this.getTransactionByHash(t))))}async getTransaction(t){return this.getTransactionByHash(t).then(this.responseParser.parseGetTransactionResponse)}async getTransactionByHash(t){const e=ko(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}async getTransactionByBlockIdAndIndex(t,e){const r=new gu(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:e})}async getTransactionReceipt(t){const e=ko(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}async getTransactionTrace(t){const e=ko(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}async getTransactionStatus(t){const e=ko(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}async simulateTransaction(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!1,skipFeeCharge:n=!0}){const s=new gu(e).identifier,a=[];return r&&a.push(ao.ESimulationFlag.SKIP_VALIDATE),n&&a.push(ao.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map((t=>this.buildTransaction(t))),simulation_flags:a}).then(this.responseParser.parseSimulateTransactionResponse)}async waitForTransaction(t,e){const r=ko(t);let{retries:n}=this,s=!1,a=!1;const i=e?.retryInterval??5e3,o=e?.errorStates??[ao.ETransactionStatus.REJECTED,ao.ETransactionExecutionStatus.REVERTED],c=e?.successStates??[ao.ETransactionExecutionStatus.SUCCEEDED,ao.ETransactionStatus.ACCEPTED_ON_L2,ao.ETransactionStatus.ACCEPTED_ON_L1];let l;for(;!s;){await Ml(i);try{l=await this.getTransactionStatus(r);const t=l.execution_status,e=l.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e))s=!0;else if(o.includes(t)||o.includes(e)){const r=`${t}: ${e}`,n=new Error(r);throw n.response=l,a=!0,n}}catch(t){if(t instanceof Error&&a)throw t;if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(r)}catch(t){if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1,await Ml(i)}return u}async getStorageAt(t,e,r=this.blockIdentifier){const n=ko(t),s=xo(e),a=new gu(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:s,block_id:a})}async getClassHashAt(t,e=this.blockIdentifier){const r=ko(t),n=new gu(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}async getClassByHash(t){return this.getClass(t)}async getClass(t,e=this.blockIdentifier){const r=ko(t),n=new gu(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n}).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e=this.blockIdentifier){const r=ko(t),n=new gu(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r}).then(this.responseParser.parseContractClassResponse)}async getCode(t,e){throw new Error("RPC does not implement getCode function")}async getContractVersion(t,e,{blockIdentifier:r=this.blockIdentifier,compiler:n=!0}={}){let s;if(t)s=await this.getClassAt(t,r);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");s=await this.getClass(e,r)}return $l(s)?n?{cairo:"1",compiler:kc(s.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getEstimateFee(t,e,r=this.blockIdentifier){return this.getInvokeEstimateFee(t,e,r)}async getInvokeEstimateFee(t,e,r=this.blockIdentifier){const n=new gu(r).identifier,s=this.buildTransaction({type:"INVOKE_FUNCTION",...t,...e},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[s],block_id:n}).then(this.responseParser.parseFeeEstimateResponse)}async getDeclareEstimateFee(t,e,r=this.blockIdentifier){const n=new gu(r).identifier,s=this.buildTransaction({type:"DECLARE",...t,...e},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[s],block_id:n}).then(this.responseParser.parseFeeEstimateResponse)}async getDeployAccountEstimateFee(t,e,r=this.blockIdentifier){const n=new gu(r).identifier,s=this.buildTransaction({type:"DEPLOY_ACCOUNT",...t,...e},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[s],block_id:n}).then(this.responseParser.parseFeeEstimateResponse)}async getEstimateFeeBulk(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!1}){r&&console.warn("getEstimateFeeBulk RPC does not support skipValidate");const n=new gu(e).identifier;return this.fetchEndpoint("starknet_estimateFee",{request:t.map((t=>this.buildTransaction(t,"fee"))),block_id:n}).then(this.responseParser.parseFeeEstimateBulkResponse)}async invokeFunction(t,e){return this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:t.contractAddress,calldata:tl.toHex(t.calldata),type:ao.ETransactionType.INVOKE,max_fee:ko(e.maxFee||0),version:"0x1",signature:Ul(t.signature),nonce:ko(e.nonce)}})}async declareContract({contract:t,signature:e,senderAddress:r,compiledClassHash:n},s){return $l(t)?this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:ao.ETransactionType.DECLARE,contract_class:{sierra_program:Nl(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},compiled_class_hash:n||"",version:Ri,max_fee:ko(s.maxFee||0),signature:Ul(e),sender_address:r,nonce:ko(s.nonce)}}):this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:ao.ETransactionType.DECLARE,contract_class:{program:t.program,entry_points_by_type:t.entry_points_by_type,abi:t.abi},version:Oi,max_fee:ko(s.maxFee||0),signature:Ul(e),sender_address:r,nonce:ko(s.nonce)}})}async deployAccountContract({classHash:t,constructorCalldata:e,addressSalt:r,signature:n},s){return this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:tl.toHex(e||[]),class_hash:ko(t),contract_address_salt:ko(r||0),type:ao.ETransactionType.DEPLOY_ACCOUNT,max_fee:ko(s.maxFee||0),version:ko(s.version||0),signature:Ul(n),nonce:ko(s.nonce)}})}async callContract(t,e=this.blockIdentifier){const r=new gu(e).identifier,n=await this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Ho(t.entrypoint),calldata:tl.toHex(t.calldata)},block_id:r});return this.responseParser.parseCallContractResponse(n)}async estimateMessageFee(t,e=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:s,payload:a}=t,i={from_address:ko(r),to_address:ko(n),entry_point_selector:zo(s),payload:Do(a)},o=new gu(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:i,block_id:o})}async getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}async getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}async getStarkName(t,e){return hu(this,t,e)}async getAddressFromStarkName(t,e){return fu(this,t,e)}buildTransaction(t,e){const r=fl(e),n={signature:Ul(t.signature),nonce:ko(t.nonce),max_fee:ko(t.maxFee||0)};if("INVOKE_FUNCTION"===t.type)return{type:ao.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:tl.toHex(t.calldata),version:ko(t.version||r.v1),...n};if("DECLARE"===t.type)return $l(t.contract)?{type:t.type,contract_class:{...t.contract,sierra_program:Nl(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:ko(t.version||r.v2),...n}:{type:t.type,contract_class:t.contract,sender_address:t.senderAddress,version:ko(t.version||r.v1),...n};if("DEPLOY_ACCOUNT"===t.type)return{type:t.type,constructor_calldata:tl.toHex(t.constructorCalldata||[]),class_hash:ko(t.classHash),contract_address_salt:ko(t.addressSalt||0),version:ko(t.version||r.v1),...n};throw Error("RPC buildTransaction received unknown TransactionType")}},wu=class{},bu=class extends wu{parseGetBlockResponse(t){return{...t,new_root:t.state_root,parent_hash:t.parent_block_hash,transactions:Object.values(t.transactions).map((t=>"transaction_hash"in t&&t.transaction_hash)).filter(Boolean)}}parseGetTransactionResponse(t){if("NOT_RECEIVED"===t.status&&"NOT_RECEIVED"===t.finality_status)throw new Xl;return{...t,calldata:"calldata"in t.transaction?t.transaction.calldata:[],contract_class:"contract_class"in t.transaction?t.transaction.contract_class:void 0,entry_point_selector:"entry_point_selector"in t.transaction?t.transaction.entry_point_selector:void 0,max_fee:"max_fee"in t.transaction?t.transaction.max_fee:void 0,nonce:t.transaction.nonce,sender_address:"sender_address"in t.transaction?t.transaction.sender_address:void 0,signature:"signature"in t.transaction?t.transaction.signature:void 0,transaction_hash:"transaction_hash"in t.transaction?t.transaction.transaction_hash:void 0,version:"version"in t.transaction?t.transaction.version:void 0}}parseGetTransactionReceiptResponse(t){return{...t,messages_sent:t.l2_to_l1_messages,..."revert_error"in t&&{revert_reason:t.revert_error}}}parseFeeEstimateResponse(t){if("overall_fee"in t){let e={};try{e={gas_consumed:Eo(t.gas_usage),gas_price:Eo(t.gas_price)}}catch{}return{overall_fee:Eo(t.overall_fee),...e}}return{overall_fee:Eo(t.amount)}}parseFeeEstimateBulkResponse(t){return[].concat(t).map((t=>{if("overall_fee"in t){let e={};try{e={gas_consumed:Eo(t.gas_usage),gas_price:Eo(t.gas_price)}}catch{}return{overall_fee:Eo(t.overall_fee),...e}}return{overall_fee:Eo(t.amount)}}))}parseSimulateTransactionResponse(t){const e="overall_fee"in t.fee_estimation?t.fee_estimation.overall_fee:t.fee_estimation.amount;return[{transaction_trace:t.trace,fee_estimation:t.fee_estimation,suggestedMaxFee:Ll(BigInt(e))}]}parseCallContractResponse(t){return{result:t.result}}parseInvokeFunctionResponse(t){return{transaction_hash:t.transaction_hash}}parseDeployContractResponse(t){return{transaction_hash:t.transaction_hash,contract_address:t.address}}parseDeclareContractResponse(t){return{transaction_hash:t.transaction_hash,class_hash:t.class_hash}}parseGetStateUpdateResponse(t){const e=Object.entries(t.state_diff.nonces).map((([t,e])=>({contract_address:t,nonce:e}))),r=Object.entries(t.state_diff.storage_diffs).map((([t,e])=>({address:t,storage_entries:e})));return{...t,state_diff:{...t.state_diff,storage_diffs:r,nonces:e}}}parseContractClassResponse(t){const e=$l(t)?t:Zl(t);return{...e,abi:"string"==typeof e.abi?JSON.parse(e.abi):e.abi}}},Eu=/^(?:\w+:)?\/\/(\S+)$/,vu=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,ku=/^[^\s.]+\.\S{2,}$/;function Au(t){if(!t)return!1;if("string"!=typeof t)return!1;const e=t.match(Eu);if(!e)return!1;const r=e[1];return!(!r||!vu.test(r)&&!ku.test(r))}function xu(t,e,r){return Au(r)?r:li(t,r??e)}var Su={network:"SN_GOERLI",blockIdentifier:"pending"},Cu=class{constructor(t=Su){this.responseParser=new bu,"network"in t?(this.baseUrl=Cu.getNetworkFromName(t.network),this.feederGatewayUrl=xu(this.baseUrl,"feeder_gateway"),this.gatewayUrl=xu(this.baseUrl,"gateway")):(this.baseUrl=t.baseUrl,this.feederGatewayUrl=xu(this.baseUrl,"feeder_gateway",t.feederGatewayUrl),this.gatewayUrl=xu(this.baseUrl,"gateway",t.gatewayUrl)),this.chainId=t?.chainId??Cu.getChainIdFromBaseUrl(this.baseUrl),this.headers=t.headers,this.blockIdentifier=t?.blockIdentifier||Su.blockIdentifier}static getNetworkFromName(t){switch(t){case"SN_MAIN":case"0x534e5f4d41494e":return"https://alpha-mainnet.starknet.io";case"SN_GOERLI":case"0x534e5f474f45524c49":return"https://alpha4.starknet.io";default:throw new Error("Could not detect base url from NetworkName")}}static getChainIdFromBaseUrl(t){try{return new URL(t).host.includes("mainnet.starknet.io")?"0x534e5f4d41494e":"0x534e5f474f45524c49"}catch{return console.error(`Could not parse baseUrl: ${t}`),"0x534e5f474f45524c49"}}getFetchUrl(t){return["add_transaction"].includes(t)?this.gatewayUrl:this.feederGatewayUrl}getFetchMethod(t){return["add_transaction","call_contract","estimate_fee","estimate_message_fee","estimate_fee_bulk","simulate_transaction"].includes(t)?"POST":"GET"}getQueryString(t){return void 0===(e=t)||0===Object.keys(e).length||1===Object.keys(e).length&&Object.entries(e).every((([t,e])=>"blockIdentifier"===t&&null===e))?"":`?${Object.entries(t).map((([t,e])=>"blockIdentifier"===t?`${new gu(e).queryIdentifier}`:`${t}=${e}`)).join("&")}`;var e}getHeaders(t){return"POST"===t?{"Content-Type":"application/json",...this.headers}:this.headers}async fetchEndpoint(t,...[e,r]){const n=this.getFetchUrl(t),s=this.getFetchMethod(t),a=this.getQueryString(e),i=li(n,t,a);return this.fetch(i,{method:s,body:r})}async fetch(t,e){const r=xu(this.baseUrl,"",t),n=e?.method??"GET",s=this.getHeaders(n),a=ol(e?.body);try{const t=await Vl(r,{method:n,body:a,headers:s}),i=await t.text();if(!t.ok){let e;try{e=al(i)}catch{throw new Ql(t.statusText,t.status)}throw new Jl(e.message,e.code)}return(e?.parseAlwaysAsBigInt?il:al)(i)}catch(t){if(t instanceof Error&&!(t instanceof Xl))throw Error(`Could not ${n} from endpoint \`${r}\`: ${t.message}`);throw t}}async getChainId(){return Promise.resolve(this.chainId)}async callContract({contractAddress:t,entrypoint:e,calldata:r=[]},n=this.blockIdentifier){return this.fetchEndpoint("call_contract",{blockIdentifier:n},{contract_address:t,entry_point_selector:Ho(e),calldata:tl.compile(r)}).then(this.responseParser.parseCallContractResponse)}async getBlock(t=this.blockIdentifier){return this.fetchEndpoint("get_block",{blockIdentifier:t}).then(this.responseParser.parseGetBlockResponse)}async getNonceForAddress(t,e=this.blockIdentifier){return this.fetchEndpoint("get_nonce",{contractAddress:t,blockIdentifier:e})}async getStorageAt(t,e,r=this.blockIdentifier){const n=Eo(e).toString(10);return this.fetchEndpoint("get_storage_at",{blockIdentifier:r,contractAddress:t,key:n})}async getTransaction(t){const e=ko(t);return this.fetchEndpoint("get_transaction",{transactionHash:e}).then((t=>{if(1===Object.values(t).length)throw new Xl(t.status);return this.responseParser.parseGetTransactionResponse(t)}))}async getTransactionReceipt(t){const e=ko(t);return this.fetchEndpoint("get_transaction_receipt",{transactionHash:e}).then(this.responseParser.parseGetTransactionReceiptResponse)}async getClassAt(t,e=this.blockIdentifier){return this.fetchEndpoint("get_full_contract",{blockIdentifier:e,contractAddress:t}).then(this.responseParser.parseContractClassResponse)}async getClassHashAt(t,e=this.blockIdentifier){return this.fetchEndpoint("get_class_hash_at",{blockIdentifier:e,contractAddress:t})}async getClassByHash(t,e=this.blockIdentifier){return this.fetchEndpoint("get_class_by_hash",{classHash:t,blockIdentifier:e}).then(this.responseParser.parseContractClassResponse)}async getCompiledClassByClassHash(t,e=this.blockIdentifier){return this.fetchEndpoint("get_compiled_class_by_class_hash",{classHash:t,blockIdentifier:e})}async getContractVersion(t,e,{blockIdentifier:r=this.blockIdentifier,compiler:n=!0}={}){let s;if(t)s=await this.getClassAt(t,r);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");s=await this.getClassByHash(e,r)}return $l(s)?n?{cairo:"1",compiler:kc(s.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async invokeFunction(t,e){return this.fetchEndpoint("add_transaction",void 0,{type:"INVOKE_FUNCTION",sender_address:t.contractAddress,calldata:tl.compile(t.calldata??[]),signature:Pl(t.signature),nonce:ko(e.nonce),max_fee:ko(e.maxFee||0),version:"0x1"}).then(this.responseParser.parseInvokeFunctionResponse)}async deployAccountContract({classHash:t,constructorCalldata:e,addressSalt:r,signature:n},s){return this.fetchEndpoint("add_transaction",void 0,{type:"DEPLOY_ACCOUNT",contract_address_salt:r??Bl(),constructor_calldata:tl.compile(e??[]),class_hash:ko(t),max_fee:ko(s.maxFee||0),version:ko(s.version||0),nonce:ko(s.nonce),signature:Pl(n)}).then(this.responseParser.parseDeployContractResponse)}async declareContract({senderAddress:t,contract:e,signature:r,compiledClassHash:n},s){return $l(e)?this.fetchEndpoint("add_transaction",void 0,{type:"DECLARE",sender_address:t,compiled_class_hash:n,contract_class:e,nonce:ko(s.nonce),signature:Pl(r),max_fee:ko(s.maxFee||0),version:ko(ul)}).then(this.responseParser.parseDeclareContractResponse):this.fetchEndpoint("add_transaction",void 0,{type:"DECLARE",contract_class:e,nonce:ko(s.nonce),signature:Pl(r),sender_address:t,max_fee:ko(s.maxFee||0),version:ko(ll)}).then(this.responseParser.parseDeclareContractResponse)}async getEstimateFee(t,e,r=this.blockIdentifier,n=!1){return this.getInvokeEstimateFee(t,e,r,n)}async getInvokeEstimateFee(t,e,r=this.blockIdentifier,n=!1){const s=this.buildTransaction({type:"INVOKE_FUNCTION",...t,...e},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:r,skipValidate:n},s).then(this.responseParser.parseFeeEstimateResponse)}async getDeclareEstimateFee(t,e,r=this.blockIdentifier,n=!1){const s=this.buildTransaction({type:"DECLARE",...t,...e},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:r,skipValidate:n},s).then(this.responseParser.parseFeeEstimateResponse)}async getDeployAccountEstimateFee(t,e,r=this.blockIdentifier,n=!1){const s=this.buildTransaction({type:"DEPLOY_ACCOUNT",...t,...e},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:r,skipValidate:n},s).then(this.responseParser.parseFeeEstimateResponse)}async getEstimateFeeBulk(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!1}){const n=t.map((t=>this.buildTransaction(t,"fee")));return this.fetchEndpoint("estimate_fee_bulk",{blockIdentifier:e,skipValidate:r},n).then(this.responseParser.parseFeeEstimateBulkResponse)}async getCode(t,e=this.blockIdentifier){return this.fetchEndpoint("get_code",{contractAddress:t,blockIdentifier:e})}async waitForTransaction(t,e){let r,n=!1,s=0;const a=e?.retryInterval??5e3,i=e?.errorStates??["REJECTED","NOT_RECEIVED","REVERTED"],o=e?.successStates??["SUCCEEDED","ACCEPTED_ON_L1","ACCEPTED_ON_L2"];for(;!n;)if(await Ml(a),r=await this.getTransactionStatus(t),"NOT_RECEIVED"===r.finality_status&&s<3)s+=1;else if(o.includes(r.finality_status)||o.includes(r.execution_status))n=!0;else if(i.includes(r.finality_status)||i.includes(r.execution_status)){let t;t=r.tx_failure_reason?`${r.tx_status}: ${r.tx_failure_reason.code}\n${r.tx_failure_reason.error_message}`:r.tx_revert_reason?`${r.tx_status}: ${r.tx_revert_reason}`:r.tx_status;const e=new Error(t);throw e.response=r,e}return await this.getTransactionReceipt(t)}async getTransactionStatus(t){const e=ko(t);return this.fetchEndpoint("get_transaction_status",{transactionHash:e})}async getContractAddresses(){return this.fetchEndpoint("get_contract_addresses")}async getTransactionTrace(t){const e=ko(t);return this.fetchEndpoint("get_transaction_trace",{transactionHash:e})}async estimateMessageFee({from_address:t,to_address:e,entry_point_selector:r,payload:n},s=this.blockIdentifier){const a={from_address:No(t),to_address:Bo(e),entry_point_selector:zo(r),payload:Do(n)};return this.fetchEndpoint("estimate_message_fee",{blockIdentifier:s},a)}async getSimulateTransaction(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!1,skipExecute:n=!1}){t.length>1&&console.warn("Sequencer simulate process only first element from invocations list"),n&&console.warn("Sequencer can't skip account __execute__");const s=this.buildTransaction(t[0]);return this.fetchEndpoint("simulate_transaction",{blockIdentifier:e,skipValidate:r??!1},s).then(this.responseParser.parseSimulateTransactionResponse)}async getStateUpdate(t=this.blockIdentifier){const e=new gu(t).sequencerIdentifier;return this.fetchEndpoint("get_state_update",{...e}).then(this.responseParser.parseGetStateUpdateResponse)}async getBlockTraces(t=this.blockIdentifier){const e=new gu(t).sequencerIdentifier;return this.fetchEndpoint("get_block_traces",{...e})}async getStarkName(t,e){return hu(this,t,e)}async getAddressFromStarkName(t,e){return fu(this,t,e)}buildTransaction(t,e){const r=fl(e),n={signature:Pl(t.signature),nonce:ko(t.nonce)};if("INVOKE_FUNCTION"===t.type)return{type:t.type,sender_address:t.contractAddress,calldata:tl.compile(t.calldata??[]),version:ko(t.version||r.v1),...n};if("DECLARE"===t.type)return $l(t.contract)?{type:t.type,contract_class:t.contract,compiled_class_hash:t.compiledClassHash,sender_address:t.senderAddress,version:ko(t.version||r.v2),...n}:{type:t.type,contract_class:t.contract,sender_address:t.senderAddress,version:ko(t.version||r.v1),...n};if("DEPLOY_ACCOUNT"===t.type)return{type:t.type,constructor_calldata:tl.compile(t.constructorCalldata||[]),class_hash:ko(t.classHash),contract_address_salt:ko(t.addressSalt||0),version:ko(t.version||r.v1),...n};throw Error("Sequencer buildTransaction received unknown TransactionType")}},Iu=class{constructor(t){this.provider=t instanceof Iu?t.provider:t instanceof _u||t instanceof Cu?t:t&&"rpc"in t?new _u(t.rpc):t&&"sequencer"in t?new Cu(t.sequencer):new _u}async getChainId(){return this.provider.getChainId()}async getBlock(t){return this.provider.getBlock(t)}async getClassAt(t,e){return this.provider.getClassAt(t,e)}async getClassHashAt(t,e){return this.provider.getClassHashAt(t,e)}getClassByHash(t){return this.provider.getClassByHash(t)}async getEstimateFee(t,e,r){return this.provider.getEstimateFee(t,e,r)}async getInvokeEstimateFee(t,e,r,n){return this.provider.getInvokeEstimateFee(t,e,r,n)}async getEstimateFeeBulk(t,e){return this.provider.getEstimateFeeBulk(t,e)}async getNonceForAddress(t,e){return this.provider.getNonceForAddress(t,e)}async getStorageAt(t,e,r){return this.provider.getStorageAt(t,e,r)}async getTransaction(t){return this.provider.getTransaction(t)}async getTransactionReceipt(t){return this.provider.getTransactionReceipt(t)}async callContract(t,e){return this.provider.callContract(t,e)}async invokeFunction(t,e){return this.provider.invokeFunction(t,e)}async deployAccountContract(t,e){return this.provider.deployAccountContract(t,e)}async declareContract(t,e){return this.provider.declareContract(t,e)}async getDeclareEstimateFee(t,e,r,n){return this.provider.getDeclareEstimateFee(t,e,r,n)}getDeployAccountEstimateFee(t,e,r,n){return this.provider.getDeployAccountEstimateFee(t,e,r,n)}async getCode(t,e){return this.provider.getCode(t,e)}async waitForTransaction(t,e){return this.provider.waitForTransaction(t,e)}async getSimulateTransaction(t,e){return this.provider.getSimulateTransaction(t,e)}async getStateUpdate(t){return this.provider.getStateUpdate(t)}async getStarkName(t,e){return hu(this,t,e)}async getAddressFromStarkName(t,e){return fu(this,t,e)}async getContractVersion(t,e,r){return this.provider.getContractVersion(t,e,r)}},Tu=class{},Ou={};di(Ou,{fromCallsToExecuteCalldata:()=>Nu,fromCallsToExecuteCalldataWithNonce:()=>Bu,fromCallsToExecuteCalldata_cairo1:()=>Fu,getExecuteCalldata:()=>Pu,transformCallsToMulticallArrays:()=>Ru,transformCallsToMulticallArrays_cairo1:()=>Du});var Ru=t=>{const e=[],r=[];return t.forEach((t=>{const n=tl.compile(t.calldata||[]);e.push({to:Eo(t.contractAddress).toString(10),selector:Eo(Ho(t.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)})),{callArray:e,calldata:tl.compile({calldata:r})}},Nu=t=>{const{callArray:e,calldata:r}=Ru(t);return[...tl.compile({callArray:e}),...r]},Bu=(t,e)=>[...Nu(t),Eo(e).toString()],Du=t=>t.map((t=>({to:Eo(t.contractAddress).toString(10),selector:Eo(Ho(t.entrypoint)).toString(10),calldata:tl.compile(t.calldata||[])}))),Fu=t=>{const e=t.map((t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:tl.compile(t.calldata)})));return tl.compile({orderCalls:e})},Pu=(t,e="0")=>"1"===e?Fu(t):Nu(t),Uu={};di(Uu,{encodeData:()=>Gu,encodeType:()=>qu,encodeValue:()=>Ku,getDependencies:()=>Mu,getMessageHash:()=>Wu,getStructHash:()=>Yu,getTypeHash:()=>Zu,isMerkleTreeType:()=>ju,prepareSelector:()=>Vu});var Lu={};di(Lu,{MerkleTree:()=>$u,proofMerklePath:()=>Hu});var $u=class{constructor(t){this.branches=[],this.leaves=t,this.root=this.build(t)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const e=[];for(let r=0;r<t.length;r+=2)r+1===t.length?e.push($u.hash(t[r],"0x0")):e.push($u.hash(t[r],t[r+1]));return this.build(e)}static hash(t,e){const[r,n]=[Eo(t),Eo(e)].sort(((t,e)=>t>=e?1:-1));return Ue(r,n)}getProof(t,e=this.leaves,r=[]){const n=e.indexOf(t);if(-1===n)throw new Error("leaf not found");if(1===e.length)return r;const s=n%2==0,a=(s?e[n+1]:e[n-1])??"0x0",i=[...r,a],o=this.leaves.length===e.length?-1:this.branches.findIndex((t=>t.length===e.length)),c=this.branches[o+1]??[this.root];return this.getProof($u.hash(s?t:a,s?a:t),c,i)}};function Hu(t,e,r){if(0===r.length)return t===e;const[n,...s]=r;return Hu(t,$u.hash(e,n),s)}function zu(t){try{return ko(t)}catch(e){if("string"==typeof t)return ko(Wo(t));throw new Error(`Invalid BigNumberish: ${t}`)}}function Vu(t){return bo(t)?t:Ho(t)}function ju(t){return"merkletree"===t.type}var Mu=(t,e,r=[])=>("*"===e[e.length-1]&&(e=e.slice(0,-1)),r.includes(e)?r:t[e]?[e,...t[e].reduce(((e,r)=>[...e,...Mu(t,r.type,e).filter((t=>!e.includes(t)))]),[])]:r),qu=(t,e)=>{const[r,...n]=Mu(t,e);return(r?[r,...n.sort()]:[]).map((e=>`${e}(${t[e].map((t=>`${t.name}:${t.type}`))})`)).join("")},Zu=(t,e)=>Ho(qu(t,e)),Ku=(t,e,r,n={})=>{if(t[e])return[e,Yu(t,e,r)];if(Object.keys(t).map((t=>`${t}*`)).includes(e)){const n=r.map((r=>Yu(t,e.slice(0,-1),r)));return[e,pl(n)]}if("merkletree"===e){const e=function(t,e){if(e.parent&&e.key){const r=t[e.parent].find((t=>t.name===e.key));if(!ju(r))throw new Error(`${e.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${e.key}`);return r.contains}return"raw"}(t,n),s=r.map((r=>Ku(t,e,r)[1])),{root:a}=new $u(s);return["felt",a]}return"felt*"===e?["felt*",pl(r)]:"selector"===e?["felt",Vu(r)]:[e,zu(r)]},Gu=(t,e,r)=>{const[n,s]=t[e].reduce((([n,s],a)=>{if(void 0===r[a.name]||null===r[a.name])throw new Error(`Cannot encode data: missing data for '${a.name}'`);const i=r[a.name],[o,c]=Ku(t,a.type,i,{parent:e,key:a.name});return[[...n,o],[...s,c]]}),[["felt"],[Zu(t,e)]]);return[n,s]},Yu=(t,e,r)=>pl(Gu(t,e,r)[1]),Wu=(t,e)=>{if(!(t=>{const e=t;return Boolean(e.types&&e.primaryType&&e.message)})(t))throw new Error("Typed data does not match JSON schema");return pl([Wo("StarkNet Message"),Yu(t.types,"StarkNetDomain",t.domain),e,Yu(t.types,t.primaryType,t.message)])},Xu=class{constructor(t=Ae.randomPrivateKey()){this.pk=t instanceof Uint8Array?Ei(t):ko(t)}async getPubKey(){return Ie(this.pk)}async signMessage(t,e){return we(Wu(t,e),this.pk)}async signTransaction(t,e,r){if(r&&r.length!==t.length)throw new Error("ABI must be provided for each transaction or no transaction");const n=Pu(t,e.cairoVersion);return we(wl(e.walletAddress,e.version,n,e.maxFee,e.chainId,e.nonce),this.pk)}async signDeployAccountTransaction({classHash:t,contractAddress:e,constructorCalldata:r,addressSalt:n,maxFee:s,version:a,chainId:i,nonce:o}){return we(_l(e,t,tl.compile(r),n,a,s,i,o),this.pk)}async signDeclareTransaction({classHash:t,senderAddress:e,chainId:r,maxFee:n,version:s,nonce:a,compiledClassHash:i}){return we(ml(t,e,s,n,r,a,i),this.pk)}};function Ju(t){if(!t.events)throw new Error("UDC emitted event is empty");const e=t.events.find((t=>Co(t.from_address)===Co(Mi.ADDRESS)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}var Qu=class extends Iu{constructor(t,e,r,n){super(t),this.deploySelf=this.deployAccount,this.address=e.toLowerCase(),this.signer="string"==typeof r||r instanceof Uint8Array?new Xu(r):r,n&&(this.cairoVersion=n.toString())}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return Eo(t??await this.getNonce())}catch(t){return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:e}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=e}return this.cairoVersion}async estimateFee(t,e){return this.estimateInvokeFee(t,e)}async estimateInvokeFee(t,{nonce:e,blockIdentifier:r,skipValidate:n}={}){const s=Array.isArray(t)?t:[t],a=Eo(e??await this.getNonce()),i=Eo(dl),o=await this.getChainId(),c={walletAddress:this.address,nonce:a,maxFee:Pi,version:i,chainId:o,cairoVersion:await this.getCairoVersion()},l=await this.buildInvocation(s,c),u=await super.getInvokeEstimateFee({...l},{version:i,nonce:a},r,n),d=Ll(u.overall_fee);return{...u,suggestedMaxFee:d}}async estimateDeclareFee({contract:t,classHash:e,casm:r,compiledClassHash:n},{blockIdentifier:s,nonce:a,skipValidate:i}={}){const o=Eo(a??await this.getNonce()),c=$l(t)?hl:dl,l=await this.getChainId(),u=await this.buildDeclarePayload({classHash:e,contract:t,casm:r,compiledClassHash:n},{nonce:o,chainId:l,version:c,walletAddress:this.address,maxFee:Pi,cairoVersion:void 0}),d=await super.getDeclareEstimateFee(u,{version:c,nonce:o},s,i),h=Ll(d.overall_fee);return{...d,suggestedMaxFee:h}}async estimateAccountDeployFee({classHash:t,addressSalt:e=0,constructorCalldata:r=[],contractAddress:n},{blockIdentifier:s,skipValidate:a}={}){const i=Eo(dl),o=Pi,c=await this.getChainId(),l=await this.buildAccountDeployPayload({classHash:t,addressSalt:e,constructorCalldata:r,contractAddress:n},{nonce:o,chainId:c,version:i,walletAddress:this.address,maxFee:Pi,cairoVersion:void 0}),u=await super.getDeployAccountEstimateFee({...l},{version:i,nonce:o},s,a),d=Ll(u.overall_fee);return{...u,suggestedMaxFee:d}}async estimateDeployFee(t,e){const r=this.buildUDCContractPayload(t);return this.estimateInvokeFee(r,e)}async estimateFeeBulk(t,{nonce:e,blockIdentifier:r,skipValidate:n}={}){const s=await this.accountInvocationsFactory(t,{versions:[dl,hl],nonce:e,blockIdentifier:r}),a=await super.getEstimateFeeBulk(s,{blockIdentifier:r,skipValidate:n});return[].concat(a).map((t=>{const e=Ll(t.overall_fee);return{...t,suggestedMaxFee:e}}))}async buildInvocation(t,e){const r=Pu(t,await this.getCairoVersion()),n=await this.signer.signTransaction(t,e);return{contractAddress:this.address,calldata:r,signature:n}}async execute(t,e=void 0,r={}){const n=Array.isArray(t)?t:[t],s=Eo(r.nonce??await this.getNonce()),a=r.maxFee??await this.getSuggestedMaxFee({type:"INVOKE_FUNCTION",payload:t},r),i=Eo(ll),o=await this.getChainId(),c={walletAddress:this.address,nonce:s,maxFee:a,version:i,chainId:o,cairoVersion:await this.getCairoVersion()},l=await this.signer.signTransaction(n,c,e),u=Pu(n,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:u,signature:l},{nonce:s,maxFee:a,version:i})}async declareIfNot(t,e={}){const r=Hl(t);try{await this.getClassByHash(r.classHash)}catch(r){return this.declare(t,e)}return{transaction_hash:"",class_hash:r.classHash}}async declare(t,e={}){const r=Hl(t),n={};n.nonce=Eo(e.nonce??await this.getNonce()),n.maxFee=e.maxFee??await this.getSuggestedMaxFee({type:"DECLARE",payload:r},e),n.version=$l(t.contract)?ul:ll,n.chainId=await this.getChainId();const s=await this.buildDeclarePayload(r,{...n,walletAddress:this.address,cairoVersion:void 0});return this.declareContract(s,n)}async deploy(t,e){const r=[].concat(t).map((t=>{const{classHash:e,salt:r,unique:n=!0,constructorCalldata:s=[]}=t,a=tl.compile(s),i=r??Bl();return{call:{contractAddress:Mi.ADDRESS,entrypoint:Mi.ENTRYPOINT,calldata:[e,i,Fo(n),a.length,...a]},address:bl(n?Ue(this.address,i):i,e,a,n?Mi.ADDRESS:0)}})),n=r.map((t=>t.call)),s=r.map((t=>t.address));return{...await this.execute(n,void 0,e),contract_address:s}}async deployContract(t,e){const r=await this.deploy(t,e);return Ju(await this.waitForTransaction(r.transaction_hash))}async declareAndDeploy(t,e){const{constructorCalldata:r,salt:n,unique:s}=t;let a=await this.declareIfNot(t,e);if(""!==a.transaction_hash){const t=await this.waitForTransaction(a.transaction_hash);a={...a,...t}}const i=await this.deployContract({classHash:a.class_hash,salt:n,unique:s,constructorCalldata:r},e);return{declare:{...a},deploy:i}}async deployAccount({classHash:t,constructorCalldata:e=[],addressSalt:r=0,contractAddress:n},s={}){const a=Eo(ll),i=Pi,o=await this.getChainId(),c=tl.compile(e),l=n??bl(r,t,c,0),u=s.maxFee??await this.getSuggestedMaxFee({type:"DEPLOY_ACCOUNT",payload:{classHash:t,constructorCalldata:c,addressSalt:r,contractAddress:l}},s),d=await this.signer.signDeployAccountTransaction({classHash:t,constructorCalldata:c,contractAddress:l,addressSalt:r,chainId:o,maxFee:u,version:a,nonce:i});return this.deployAccountContract({classHash:t,addressSalt:r,constructorCalldata:e,signature:d},{nonce:i,maxFee:u,version:a})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return Wu(t,this.address)}async verifyMessageHash(t,e){try{return await this.callContract({contractAddress:this.address,entrypoint:"isValidSignature",calldata:tl.compile({hash:Eo(t).toString(),signature:Fl(e)})}),!0}catch{return!1}}async verifyMessage(t,e){const r=await this.hashMessage(t);return this.verifyMessageHash(r,e)}async getSuggestedMaxFee({type:t,payload:e},r){let n;switch(t){case"INVOKE_FUNCTION":n=await this.estimateInvokeFee(e,r);break;case"DECLARE":n=await this.estimateDeclareFee(e,r);break;case"DEPLOY_ACCOUNT":n=await this.estimateAccountDeployFee(e,r);break;case"DEPLOY":n=await this.estimateDeployFee(e,r);break;default:n={suggestedMaxFee:Pi,overall_fee:Pi}}return n.suggestedMaxFee}async buildDeclarePayload(t,{nonce:e,chainId:r,version:n,walletAddress:s,maxFee:a}){const{classHash:i,contract:o,compiledClassHash:c}=Hl(t),l=Zl(o);return{senderAddress:s,signature:await this.signer.signDeclareTransaction({classHash:i,compiledClassHash:c,senderAddress:s,chainId:r,maxFee:a,version:n,nonce:e}),contract:l,compiledClassHash:c}}async buildAccountDeployPayload({classHash:t,addressSalt:e=0,constructorCalldata:r=[],contractAddress:n},{nonce:s,chainId:a,version:i,maxFee:o}){const c=tl.compile(r),l=n??bl(e,t,c,0);return{classHash:t,addressSalt:e,constructorCalldata:c,signature:await this.signer.signDeployAccountTransaction({classHash:t,contractAddress:l,chainId:a,maxFee:o,version:i,nonce:s,addressSalt:e,constructorCalldata:c})}}buildUDCContractPayload(t){return[].concat(t).map((t=>{const{classHash:e,salt:r="0",unique:n=!0,constructorCalldata:s=[]}=t,a=tl.compile(s);return{contractAddress:Mi.ADDRESS,entrypoint:Mi.ENTRYPOINT,calldata:[e,r,Fo(n),a.length,...a]}}))}async simulateTransaction(t,{nonce:e,blockIdentifier:r,skipValidate:n,skipExecute:s}={}){const a=await this.accountInvocationsFactory(t,{versions:[ll,ul],nonce:e,blockIdentifier:r});return super.getSimulateTransaction(a,{blockIdentifier:r,skipValidate:n,skipExecute:s})}async accountInvocationsFactory(t,{versions:e,nonce:r,blockIdentifier:n}){const s=e[0],a=await this.getNonceSafe(r),i=await this.getChainId(),o="payload"in t[0]?t[0].payload:t[0],c="DEPLOY_ACCOUNT"===t[0].type?await this.getCairoVersion(o.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map((async(t,r)=>{const o="payload"in t?t.payload:t,l={walletAddress:this.address,nonce:Eo(Number(a)+r),maxFee:Pi,version:s,chainId:i,cairoVersion:c},u={type:t.type,version:s,nonce:Eo(Number(a)+r),blockIdentifier:n};if("INVOKE_FUNCTION"===t.type){const t=await this.buildInvocation([].concat(o),l);return{...u,...t}}if("DECLARE"===t.type){l.version=$l(o.contract)?Eo(e[1]):Eo(e[0]);const t=await this.buildDeclarePayload(o,l);return{...u,...t,version:l.version}}if("DEPLOY_ACCOUNT"===t.type){const t=await this.buildAccountDeployPayload(o,l);return{...u,...t}}if("DEPLOY"===t.type){const t=this.buildUDCContractPayload(o),e=await this.buildInvocation(t,l);return{...u,...e,type:"INVOKE_FUNCTION"}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${t}`)})))}async getStarkName(t=this.address,e){return super.getStarkName(t,e)}},td=class{},ed=new Iu({rpc:{default:!0}}),rd=class extends td{},nd={};function sd(t){return t.filter((t=>"event"===t.type&&(t.size||"enum"!==t.kind))).reduce(((t,e)=>{const r=e.name.slice(e.name.lastIndexOf(":")+1),n={...e};return n.name=r,{...t,[ki(He(mi(r)).toString(16))]:n}}),{})}function ad(t,e,r,n){return t.flat().reduce(((t,s)=>{const a=e[s.keys[0]];if(!a)return t;const i={};i[a.name]={},s.keys.shift();const o=s.keys[Symbol.iterator](),c=s.data[Symbol.iterator](),l=a.members?.filter((t=>"key"===t.kind))||a.keys,u=a.members?.filter((t=>"data"===t.kind))||a.data;return l.forEach((t=>{i[a.name][t.name]=qc(o,t,r,n,i[a.name])})),u.forEach((t=>{i[a.name][t.name]=qc(c,t,r,n,i[a.name])})),t.push(i),t}),[])}di(nd,{getAbiEvents:()=>sd,parseEvents:()=>ad});var id=t=>{const e=t[t.length-1];return"object"==typeof e&&["blockIdentifier","parseRequest","parseResponse","formatResponse","maxFee","nonce","signature","addressSalt"].some((t=>t in e))?{args:t,options:t.pop()}:{args:t}};function od(t,e){return async function(...r){const n=id(r);return t.call(e.name,n.args,{parseRequest:!0,parseResponse:!0,...n.options})}}function cd(t,e){return"view"===e.stateMutability||"view"===e.state_mutability?od(t,e):function(t,e){return async function(...r){const n=id(r);return t.invoke(e.name,n.args,{parseRequest:!0,...n.options})}}(t,e)}function ld(t,e){return function(...r){return t.estimate(e.name,r)}}function ud(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}var dd=class{constructor(t,e,r=ed){this.address=e&&e.toLowerCase(),this.providerOrAccount=r,this.callData=new tl(t),this.structs=tl.getAbiStruct(t),this.events=sd(t);const n=Pc(t);this.abi=n.getLegacyFormat();const s={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach((t=>{if("function"!==t.type)return;const e=t.name;var r,n;this[e]||Object.defineProperty(this,e,{...s,value:cd(this,t)}),this.functions[e]||Object.defineProperty(this.functions,e,{...s,value:cd(this,t)}),this.callStatic[e]||Object.defineProperty(this.callStatic,e,{...s,value:od(this,t)}),this.populateTransaction[e]||Object.defineProperty(this.populateTransaction,e,{...s,value:(r=this,n=t,function(...t){return r.populate(n.name,t)})}),this.estimateFee[e]||Object.defineProperty(this.estimateFee,e,{...s,value:ld(this,t)})}))}attach(t){this.address=t}connect(t){this.providerOrAccount=t}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(t,e=[],{parseRequest:r=!0,parseResponse:n=!0,formatResponse:s,blockIdentifier:a}={}){_o(null!==this.address,"contract is not connected to an address");const i=ud(e,(()=>r?(this.callData.validate("CALL",t,e),this.callData.compile(t,e)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),e)));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:i,entrypoint:t},a).then((e=>n?s?this.callData.format(t,e.result,s):this.callData.parse(t,e.result):e.result))}invoke(t,e=[],{parseRequest:r=!0,maxFee:n,nonce:s,signature:a}={}){_o(null!==this.address,"contract is not connected to an address");const i=ud(e,(()=>r?(this.callData.validate("INVOKE",t,e),this.callData.compile(t,e)):(console.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),e))),o={contractAddress:this.address,calldata:i,entrypoint:t};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(o,void 0,{maxFee:n,nonce:s});if(!s)throw new Error("Nonce is required when invoking a function without an account");return console.warn(`Invoking ${t} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...o,signature:a},{nonce:s})}async estimate(t,e=[]){_o(null!==this.address,"contract is not connected to an address"),ud(e,(()=>!1))||this.callData.validate("INVOKE",t,e);const r=this.populate(t,e);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(r);throw Error("Contract must be connected to the account contract to estimate")}populate(t,e=[]){const r=ud(e,(()=>this.callData.compile(t,e)));return{contractAddress:this.address,entrypoint:t,calldata:r}}parseEvents(t){return ad(t.events?.filter((t=>Co(t.from_address)===Co(this.address)),[])||[],this.events,this.structs,tl.getAbiEnum(this.abi))}isCairo1(){return Jo.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typed(t){return this}},hd=class{},fd=class{constructor(t){this.compiledContract=t.compiledContract,this.account=t.account,this.casm=t.casm,this.abi=t.abi??t.compiledContract.abi,this.classHash=t.classHash,this.compiledClassHash=t.compiledClassHash,this.CallData=new tl(this.abi)}async deploy(...t){const{args:e,options:r={parseRequest:!0}}=id(t),n=ud(e,(()=>r.parseRequest?(this.CallData.validate("DEPLOY","constructor",e),this.CallData.compile("constructor",e)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),e))),{deploy:{contract_address:s,transaction_hash:a}}=await this.account.declareAndDeploy({contract:this.compiledContract,casm:this.casm,classHash:this.classHash,compiledClassHash:this.compiledClassHash,constructorCalldata:n,salt:r.addressSalt});_o(Boolean(s),"Deployment of the contract failed");const i=new dd(this.compiledContract.abi,s,this.account);return i.deployTransactionHash=a,i}connect(t){return this.account=t,this}attach(t){return new dd(this.abi,t,this.account)}};function pd(t){return ki(vi(ko(t)).padStart(64,"0"))}function gd(t){Io(t,Pi,Li,"Starknet Address");const e=pd(t);if(!e.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return e}function yd(t){const e=vi(gd(t)).toLowerCase().split(""),r=A(vi(Lo(t)).padStart(64,"0"));for(let t=0;t<e.length;t+=2)r[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&r[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return ki(e.join(""))}function md(t){return yd(t)===t}var _d=wo;window.customStark=a})()})();